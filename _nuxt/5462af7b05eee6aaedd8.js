(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{376:function(t,e,o){"use strict";var r=o(19),n=o(377)(5),l=!0;"find"in[]&&Array(1).find((function(){l=!1})),r(r.P+r.F*l,"Array",{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),o(105)("find")},377:function(t,e,o){var r=o(48),n=o(106),l=o(61),c=o(41),m=o(378);t.exports=function(t,e){var o=1==t,d=2==t,h=3==t,f=4==t,v=6==t,_=5==t||v,$=e||m;return function(e,m,P){for(var y,x,C=l(e),k=n(C),w=r(m,P,3),N=c(k.length),I=0,S=o?$(e,N):d?$(e,0):void 0;N>I;I++)if((_||I in k)&&(x=w(y=k[I],I,C),t))if(o)S[I]=x;else if(x)switch(t){case 3:return!0;case 5:return y;case 6:return I;case 2:S.push(y)}else if(f)return!1;return v?-1:h||f?f:S}}},378:function(t,e,o){var r=o(379);t.exports=function(t,e){return new(r(t))(e)}},379:function(t,e,o){var r=o(28),n=o(283),l=o(12)("species");t.exports=function(t){var e;return n(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!n(e.prototype)||(e=void 0),r(e)&&null===(e=e[l])&&(e=void 0)),void 0===e?Array:e}},381:function(t,e,o){"use strict";var r=o(48),n=o(19),l=o(61),c=o(284),m=o(285),d=o(41),h=o(288),f=o(286);n(n.S+n.F*!o(287)((function(t){Array.from(t)})),"Array",{from:function(t){var e,o,n,v,_=l(t),$="function"==typeof this?this:Array,P=arguments.length,y=P>1?arguments[1]:void 0,x=void 0!==y,C=0,k=f(_);if(x&&(y=r(y,P>2?arguments[2]:void 0,2)),null==k||$==Array&&m(k))for(o=new $(e=d(_.length));e>C;C++)h(o,C,x?y(_[C],C):_[C]);else for(v=k.call(_),o=new $;!(n=v.next()).done;C++)h(o,C,x?c(v,y,[n.value,C],!0):n.value);return o.length=C,o}})},420:function(t,e,o){"use strict";o(47),o(51),o(52),o(22),o(18),o(35);var r=o(371),n={name:"GbListSelect",props:{current:{type:String,required:!0}},data:function(){var t=this,e=Object.keys(r.gbs).map((function(e){return{value:e,text:t.$t("foe_data.gb."+e)}})).sort((function(a,b){return a.text>b.text?1:b.text>a.text?-1:0}));return{i18nPrefix:"components.gb_investment.gb_list_select.",foeGBList:r.gbList,gbData:e,selected:this.$props.current,name:"",tmpName:"",id:"gbList"+this._uid}},computed:{filteredDataObj:function(){var t=this;return this.gbData.filter((function(option){return option.text.toString().toLowerCase().indexOf(t.name.toLowerCase())>=0}))},isGbSelectModeDatalist:function(){return this.$store.state.isGbSelectModeDatalist}},watch:{selected:function(t){var e=this;t in r.gbs&&(this.$nextTick((function(){e.$data.name=""})),this.$emit("change",t))}},methods:{onSelect:function(option){option&&(this.selected=option.value)},onFocus:function(t){t.target.select()}}},l=o(13),component=Object(l.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-field",{attrs:{"label-for":t.id}},[o("template",{slot:"label"},[o("div",{staticClass:"media"},[o("span",{staticClass:"media-content"},[t._v(t._s(t.$t(t.i18nPrefix+"label")))]),o("div",{staticClass:"media-right"},[o("b-tooltip",{staticClass:"is-hidden-touch",attrs:{type:"is-dark",label:t.$t(t.i18nPrefix+"info"),multilined:""}},[o("span",{staticClass:"icon"},[o("i",{staticClass:"far fa-question-circle"})])]),o("b-tooltip",{staticClass:"is-hidden-desktop",attrs:{type:"is-dark",label:t.$t(t.i18nPrefix+"info"),multilined:"",position:"is-left"}},[o("span",{staticClass:"icon"},[o("i",{staticClass:"far fa-question-circle"})])])],1)])]),t.isGbSelectModeDatalist?o("b-autocomplete",{staticClass:"autocomplete",attrs:{placeholder:t.$t("foe_data.gb."+t.selected),id:t.id,"open-on-focus":!0,data:t.filteredDataObj,field:"text",expanded:""},on:{select:function(e){return t.onSelect(e)},focus:function(e){return e.preventDefault(),t.onFocus(e)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}):o("b-select",{attrs:{id:t.id,name:t.id,expanded:""},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},t._l(t.foeGBList,(function(e,i){return o("optgroup",{attrs:{label:t.$t("foe_data.age."+e.key)}},t._l(e.gbs,(function(e){return o("option",{domProps:{value:e}},[t._v(t._s(t.$t("foe_data.gb."+e)))])})),0)})),0)],2)}),[],!1,null,null,null);e.a=component.exports},529:function(t,e,o){"use strict";o(50),o(84),o(18),o(35),o(376);var r=o(23),n=(o(47),o(4)),l=(o(49),o(27),o(22),o(83),o(381),o(3)),c=o(393),m=o(420),d=o(62),h=o(421),f=o(382),v=o(109),_=o(511),$=o.n(_);function P(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function y(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?P(source,!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):P(source).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var x="components.promotion_message_builder.",C=/Default\s\d+/,k={name:"PromotionMessageBuilder",props:{gbKey:{type:String,default:$.a.key},messageInterpolation:{type:Array,default:function(){return[{key:"FLVL",value:9},{key:"TLVL",value:10},{key:"OP",value:430}]}},placesInterpolationValues:{type:Array,default:function(){for(var t=[],e=[124,67,19,10,0],o=[402,402,421,421,430],i=0;i<$.a.levels[9].reward.length;i++)$.a.levels[9].reward[i]<=0||t.push([{key:"PI",value:i+1},{key:"PV",value:e[i],free:!0},{key:"PP",value:o[i]}]);return t}}},data:function(){var t=v.c,e=this.$cookies.get("customPromotionMessagesTemplates")?this.$cookies.get("customPromotionMessagesTemplates"):[],data={i18nPrefix:x,tooltips:{config:!1},action:"create",templateName:"",startFromTemplate:"",defaultTemplates:t,customTemplates:e,oldTemplateName:"",addFieldName:"",addFieldValue:"",result:{prefix:"",suffix:"",useShortGbName:!1,reversePlacesOrder:!1,placeSeparator:"",place:"",message:"",customFields:{}},errors:{templateName:{found:!1,message:""},addFieldName:{found:!1,message:""}}};return data},computed:{lang:function(){return this.$store.state.locale},resultString:function(){return JSON.stringify(this.result)},customFields:function(){var t=this;return this.$data.result.customFields?Object.keys(this.$data.result.customFields).map((function(e){return t.$data.result.customFields[e]})):[]},placePreview:function(){return this.result.place&&this.result.place.length?v.b.call(this,this.$props.gbKey,y({displayGbName:!0},this.result,{message:this.result.place}),this.$props.placesInterpolationValues[0]):""},selectLabel:function(){return"create"===this.action?this.$t(x+"start_from_template"):"update"===this.action?this.$t(x+"edit_template"):this.$t(x+"delete_template")},resultMessage:function(){return this.result.message&&this.result.message.length?v.a.call(this,this.$props.gbKey,y({displayGbName:!0},this.result),this.$props.messageInterpolation,this.$props.placesInterpolationValues):""}},watch:{lang:function(){null!==this.$data.result&&this.updatePromotionMessage()},templateName:function(t){t&&t.length?C.test(t)?(this.errors.templateName.found=!0,this.errors.templateName.message=this.$t(x+"errors.template_cannot_have_this_name")):(this.errors.templateName.found=!1,this.errors.templateName.message=""):(this.errors.templateName.found=!0,this.errors.templateName.message=this.$t("utils.errors.field_cannot_be_empty"))},startFromTemplate:function(t){var e=C.test(t)?this.defaultTemplates.find((function(e){return e.name===t})).config:this.customTemplates.find((function(e){return e.name===t})).config;this.result=y({customFields:{}},JSON.parse(JSON.stringify(e))),this.$data.oldTemplateName=t,"update"===this.action&&(this.$data.templateName=t)},addFieldName:function(t){Object.keys(this.$data.result.customFields).indexOf(t)>=0?(this.$data.errors.addFieldName.found=!0,this.$data.errors.addFieldName.message=this.$t(x+"errors.custom_name_already_exists")):(this.$data.errors.addFieldName.found=!1,this.$data.errors.addFieldName.message="")}},methods:{successCopy:function(t){this.tooltips[t]=!0;var e=this;setTimeout((function(){e.tooltips[t]=!1}),3e3)},getTemplateSample:function(template){return v.a.call(this,this.$props.gbKey,y({displayGbName:!0},template),this.$props.messageInterpolation,this.$props.placesInterpolationValues)},save:function(){if(!this.templateName||!this.templateName.length)return this.errors.templateName.found=!0,void(this.errors.templateName.message=this.$t("utils.errors.field_cannot_be_empty"));if(C.test(this.templateName))return this.errors.templateName.found=!0,void(this.errors.templateName.message=this.$t(x+"errors.template_cannot_have_this_name"));this.errors.templateName.found=!1,this.errors.templateName.message="";var t=this.$cookies.get("customPromotionMessagesTemplates");if(t||(t=[]),"update"===this.action){var e=this.customTemplates.map((function(t){return t.name})).indexOf(this.oldTemplateName);e>=0&&(t[e]={name:this.templateName,config:this.result})}else t.push({name:this.templateName,config:this.result});this.$cookies.set("customPromotionMessagesTemplates",t,{path:"/",expires:l.a.getDefaultCookieExpireTime()}),this.customTemplates=t,this.$store.commit("UPDATE_CUSTOM_PROMOTION_MESSAGE_TEMPLATES",JSON.parse(JSON.stringify(this.customTemplates))),this.$buefy.notification.open({message:this.$t(x+("update"===this.action?"template_updated":"template_saved")),type:"is-success",duration:5e3})},deleteTemplate:function(){if(this.startFromTemplate&&this.startFromTemplate.length){var t=this.customTemplates.map((function(t){return t.name})).indexOf(this.startFromTemplate);this.customTemplates.splice(t,1),this.$store.commit("UPDATE_CUSTOM_PROMOTION_MESSAGE_TEMPLATES",JSON.parse(JSON.stringify(this.customTemplates))),this.$cookies.set("customPromotionMessagesTemplates",this.customTemplates,{path:"/",expires:l.a.getDefaultCookieExpireTime()}),this.action="create",this.$buefy.notification.open({message:this.$t(x+"template_deleted"),type:"is-success",duration:5e3})}},addCustomField:function(){if(!this.$data.addFieldName||!this.$data.addFieldName.length)return this.$data.errors.addFieldName.found=!0,void(this.$data.errors.addFieldName.message=this.$t(x+"errors.custom_name_empty"));if(Object.keys(this.$data.result.customFields).indexOf(this.$data.addFieldName)>=0)return this.$data.errors.addFieldName.found=!0,void(this.$data.errors.addFieldName.message=this.$t(x+"errors.custom_name_already_exists"));this.$data.errors.addFieldName.found=!1,this.$data.errors.addFieldName.message="";var t=y({},this.$data.result.customFields);t[this.$data.addFieldName]={key:this.$data.addFieldName,value:this.$data.addFieldValue},this.$data.result.customFields=t,this.$data.addFieldName="",this.$data.addFieldValue=""},removeCustomField:function(t){var e=y({},this.$data.result.customFields);delete e[t],this.$data.result.customFields=e},nbMultiLine:function(t){var e=t.match(/\n/gi);return e&&e.length>0?e.length+1:0},cookieValid:function(t){return void 0!==this.$cookies.get(t)&&!isNaN(this.$cookies.get(t))},haveError:function(input){return this.$data.errors[input].found?"is-danger":""},getErrorMessage:function(input){return this.$data.errors[input].found?this.$data.errors[input].message:""}},components:{yesNo:d.a,numberinput:h.a}},w=o(13),N=Object(w.a)(k,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("h4",{staticClass:"title is-4 margin-top-one-em"},[t._v(t._s(t.$t(t.$data.i18nPrefix+"title")))]),o("p",[t._v(t._s(t.$t(t.$data.i18nPrefix+"note")))]),t.customTemplates.length?[o("div",{staticClass:"columns"},[o("div",{staticClass:"column"},[o("b-field",{attrs:{label:t.$t(t.i18nPrefix+"action")}}),o("b-field",[o("b-radio",{attrs:{"native-value":"create"},model:{value:t.action,callback:function(e){t.action=e},expression:"action"}},[t._v(t._s(t.$t(t.i18nPrefix+"actions.create")))])],1),o("b-field",[o("b-radio",{attrs:{"native-value":"update"},model:{value:t.action,callback:function(e){t.action=e},expression:"action"}},[t._v(t._s(t.$t(t.i18nPrefix+"actions.update")))])],1),o("b-field",[o("b-radio",{attrs:{"native-value":"delete"},model:{value:t.action,callback:function(e){t.action=e},expression:"action"}},[t._v(t._s(t.$t(t.i18nPrefix+"actions.delete")))])],1)],1)])]:t._e(),o("div",{staticClass:"columns"},[o("div",{staticClass:"column"},[o("b-field",{attrs:{label:t.selectLabel,"label-for":"pmbStartFromTemplate"}},[o("b-select",{attrs:{id:"pmbStartFromTemplate",name:"startFromTemplate",autocomplete:"off",expanded:""},model:{value:t.startFromTemplate,callback:function(e){t.startFromTemplate="string"==typeof e?e.trim():e},expression:"startFromTemplate"}},["create"===t.action?[o("optgroup",{attrs:{label:t.$t(t.i18nPrefix+"templates.default")}},t._l(t.defaultTemplates,(function(template){return o("option",{key:template.name,domProps:{value:template.name}},[t._v(t._s(template.name)+": "+t._s(t.getTemplateSample(template.config)))])})),0),t.customTemplates.length?o("optgroup",{attrs:{label:t.$t(t.i18nPrefix+"templates.custom")}},t._l(t.customTemplates,(function(template){return o("option",{key:template.name,domProps:{value:template.name}},[t._v(t._s(template.name)+": "+t._s(t.getTemplateSample(template.config)))])})),0):t._e()]:t._l(t.customTemplates,(function(template){return o("option",{key:template.name,domProps:{value:template.name}},[t._v(t._s(template.name)+": "+t._s(t.getTemplateSample(template.config)))])}))],2)],1)],1)]),"delete"!==t.action?[o("div",{staticClass:"columns"},[o("div",{staticClass:"column"},[o("b-field",{attrs:{"label-for":"pmbConfig"}},[o("template",{slot:"label"},[o("div",{staticClass:"media"},[o("span",{staticClass:"media-content"},[t._v(t._s(t.$t(t.i18nPrefix+"config")))]),o("div",{staticClass:"media-right"},[o("b-tooltip",{staticClass:"is-hidden-touch",attrs:{type:"is-dark",label:t.$t(t.i18nPrefix+"info"),multilined:""}},[o("span",{staticClass:"icon"},[o("i",{staticClass:"far fa-question-circle"})])]),o("b-tooltip",{staticClass:"is-hidden-desktop",attrs:{type:"is-dark",label:t.$t(t.i18nPrefix+"info"),multilined:"",position:"is-left"}},[o("span",{staticClass:"icon"},[o("i",{staticClass:"far fa-question-circle"})])])],1)])])],2),o("b-field",[o("b-input",{attrs:{id:"pmbConfig",type:"text",name:"config",autocomplete:"off",expanded:"",disabled:""},model:{value:t.resultString,callback:function(e){t.resultString="string"==typeof e?e.trim():e},expression:"resultString"}}),o("p",{staticClass:"control"},[o("b-tooltip",{attrs:{type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.$t("utils.Copyed"),active:t.tooltips.config,always:""}},[o("button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.resultString,expression:"resultString"}],staticClass:"button copy",attrs:{title:t.$t("utils.Copy")},on:{success:function(e){return t.successCopy("config")}}},[o("span",{staticClass:"icon"},[o("i",{staticClass:"far fa-copy"})]),t._v("  "+t._s(t.$t("utils.Copy")))])])],1)],1)],1)]),o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half"},[o("b-field",{attrs:{label:t.$t("utils.Prefix"),"label-for":"pmbPrefix"}},[o("b-input",{attrs:{id:"pmbPrefix",type:"text",name:"prefix",autocomplete:"off",placeholder:t.$t("components.gb_investment.promotion.prefix_placeholder")},model:{value:t.result.prefix,callback:function(e){t.$set(t.result,"prefix","string"==typeof e?e.trim():e)},expression:"result.prefix"}})],1)],1),o("div",{staticClass:"column is-half"},[o("b-field",{attrs:{label:t.$t("utils.Suffix"),"label-for":"pmbSuffix"}},[o("b-input",{attrs:{id:"pmbSuffix",type:"text",name:"suffix",autocomplete:"off",placeholder:t.$t("components.gb_investment.promotion.suffix_placeholder")},model:{value:t.result.suffix,callback:function(e){t.$set(t.result,"suffix","string"==typeof e?e.trim():e)},expression:"result.suffix"}})],1)],1)]),o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half"},[o("yes-no",{attrs:{label:t.$t(t.i18nPrefix+"use_short_name")},model:{value:t.result.useShortGbName,callback:function(e){t.$set(t.result,"useShortGbName",e)},expression:"result.useShortGbName"}})],1),o("div",{staticClass:"column is-half"},[o("yes-no",{attrs:{label:t.$t(t.i18nPrefix+"reverse_place_order")},model:{value:t.result.reversePlacesOrder,callback:function(e){t.$set(t.result,"reversePlacesOrder",e)},expression:"result.reversePlacesOrder"}})],1)]),o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half"},[o("b-message",{attrs:{type:"is-info"}},[o("p",[t._v(t._s(t.$t(t.$data.i18nPrefix+"available_variables")))]),o("ul",[o("li",[o("b",[t._v("${LF}")]),t._v(": "+t._s(t.$t(t.$data.i18nPrefix+"variables.message.LF")))])])])],1),o("div",{staticClass:"column is-half"},[o("b-field",{attrs:{label:t.$t(t.i18nPrefix+"place_separator"),"label-for":"pmbPlaceSeparator"}},[o("b-input",{attrs:{id:"pmbPlaceSeparator",type:"text",name:"placeSeparator",autocomplete:"off"},model:{value:t.result.placeSeparator,callback:function(e){t.$set(t.result,"placeSeparator",e)},expression:"result.placeSeparator"}})],1)],1)]),o("h6",{staticClass:"title is-6 margin-top-one-em"},[t._v(t._s(t.$t(t.$data.i18nPrefix+"add_field_title")))]),o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half"},[o("b-field",{attrs:{label:t.$t(t.i18nPrefix+"add_field.name"),"label-for":"pmbAddFieldName",type:t.haveError("addFieldName"),message:t.getErrorMessage("addFieldName")}},[o("b-input",{attrs:{id:"pmbAddFieldName",type:"text",name:"addFieldName",autocomplete:"off"},model:{value:t.addFieldName,callback:function(e){t.addFieldName=e},expression:"addFieldName"}})],1)],1),o("div",{staticClass:"column is-half"},[o("b-field",{attrs:{label:t.$t(t.i18nPrefix+"add_field.value"),"label-for":"pmbAddFieldValue"}},[o("b-field",{attrs:{grouped:""}},[o("b-input",{attrs:{id:"pmbAddFieldValue",type:"text",name:"addFieldValue",autocomplete:"off",expanded:""},model:{value:t.addFieldValue,callback:function(e){t.addFieldValue=e},expression:"addFieldValue"}}),o("p",{staticClass:"control"},[o("button",{staticClass:"button is-info",attrs:{title:t.$t("utils.Add")},on:{click:t.addCustomField}},[o("span",{staticClass:"icon"},[o("i",{staticClass:"fas fa-plus"})]),t._v("  "+t._s(t.$t("utils.Add")))])])],1)],1)],1)]),t.customFields.length?[o("h6",{staticClass:"title is-6 margin-top-one-em"},[t._v(t._s(t.$t(t.$data.i18nPrefix+"custom_field_title")))]),o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half"},[o("b-field",{attrs:{label:t.$t(t.i18nPrefix+"add_field.name")}})],1),o("div",{staticClass:"column is-half"},[o("b-field",{attrs:{label:t.$t(t.i18nPrefix+"add_field.value")}})],1)]),t._l(t.customFields,(function(e,r){return o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half"},[o("b-field",[o("p",{staticClass:"control"},[o("b-tooltip",{attrs:{type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.$t("utils.Remove")}},[o("button",{staticClass:"button is-danger is-outlined",attrs:{title:t.$t("utils.Remove")},on:{click:function(o){return t.removeCustomField(e.key)}}},[o("span",{staticClass:"icon"},[o("i",{staticClass:"fas fa-trash"})])])])],1),o("b-input",{attrs:{type:"text",autocomplete:"off",expanded:""},model:{value:e.key,callback:function(o){t.$set(e,"key",o)},expression:"customField.key"}})],1)],1),o("div",{staticClass:"column is-half"},[o("b-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.value,callback:function(o){t.$set(e,"value",o)},expression:"customField.value"}})],1)])}))]:t._e(),o("h5",{staticClass:"title is-5 margin-top-one-em"},[t._v(t._s(t.$t(t.$data.i18nPrefix+"place_builder_title")))]),o("b-message",{attrs:{type:"is-info"}},[o("p",[t._v(t._s(t.$t(t.$data.i18nPrefix+"available_variables")))]),o("ul",[o("li",[o("b",[t._v("${FLVL}")]),t._v(": "+t._s(t.$t(t.$data.i18nPrefix+"variables.message.FLVL")))]),o("li",[o("b",[t._v("${TLVL}")]),t._v(": "+t._s(t.$t(t.$data.i18nPrefix+"variables.message.TLVL")))]),o("li",[o("b",[t._v("${GBN}")]),t._v(": "+t._s(t.$t(t.$data.i18nPrefix+"variables.message.GBN")))]),o("li",[o("b",[t._v("${LF}")]),t._v(": "+t._s(t.$t(t.$data.i18nPrefix+"variables.message.LF")))]),o("li",[o("b",[t._v("${PI}")]),t._v(": "+t._s(t.$t(t.$data.i18nPrefix+"variables.place.PI")))]),o("li",[o("b",[t._v("${PV}")]),t._v(": "+t._s(t.$t(t.$data.i18nPrefix+"variables.place.PV")))]),o("li",[o("b",[t._v("${PP}")]),t._v(": "+t._s(t.$t(t.$data.i18nPrefix+"variables.place.PP")))]),t._l(t.customFields,(function(e,r){return o("li",[o("b",[t._v(t._s("${"+e.key+"}"))]),t._v(": "+t._s(e.value))])}))],2)]),o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half"},[o("b-field",{attrs:{label:t.$t(t.i18nPrefix+"place_builder"),"label-for":"pmbPlaceBuilder"}},[o("b-input",{attrs:{id:"pmbPlaceBuilder",type:"text",name:"pmbPlaceBuilder",autocomplete:"off"},model:{value:t.result.place,callback:function(e){t.$set(t.result,"place","string"==typeof e?e.trim():e)},expression:"result.place"}})],1)],1),o("div",{staticClass:"column is-half"},[o("b-field",{attrs:{label:t.$t(t.i18nPrefix+"place_preview"),"label-for":"pmbPlacePreview"}},[o("b-input",{attrs:{id:"pmbPlacePreview",type:t.nbMultiLine(t.placePreview)?"textarea":"text",rows:t.nbMultiLine(t.placePreview)?t.nbMultiLine(t.placePreview):"",name:"pmbPlacePreview",autocomplete:"off",disabled:""},model:{value:t.placePreview,callback:function(e){t.placePreview="string"==typeof e?e.trim():e},expression:"placePreview"}})],1)],1)]),o("h5",{staticClass:"title is-5 margin-top-one-em"},[t._v(t._s(t.$t(t.$data.i18nPrefix+"message_builder_title")))]),o("b-message",{attrs:{type:"is-info"}},[o("p",[t._v(t._s(t.$t(t.$data.i18nPrefix+"available_variables")))]),o("ul",[o("li",[o("b",[t._v("${FLVL}")]),t._v(": "+t._s(t.$t(t.$data.i18nPrefix+"variables.message.FLVL")))]),o("li",[o("b",[t._v("${TLVL}")]),t._v(": "+t._s(t.$t(t.$data.i18nPrefix+"variables.message.TLVL")))]),o("li",[o("b",[t._v("${GBN}")]),t._v(": "+t._s(t.$t(t.$data.i18nPrefix+"variables.message.GBN")))]),o("li",[o("b",[t._v("${LF}")]),t._v(": "+t._s(t.$t(t.$data.i18nPrefix+"variables.message.LF")))]),o("li",[o("b",[t._v("${P}")]),t._v(": "+t._s(t.$t(t.$data.i18nPrefix+"variables.message.P")))]),o("li",[o("b",[t._v("${OP}")])]),o("li",[o("b",[t._v("${PPx}")]),t._v(": "+t._s(t.$t(t.$data.i18nPrefix+"variables.message.PPx")))]),t._l(t.customFields,(function(e,r){return o("li",[o("b",[t._v(t._s("${"+e.key+"}"))]),t._v(": "+t._s(e.value))])}))],2)]),o("div",{staticClass:"columns"},[o("div",{staticClass:"column"},[o("b-field",{attrs:{label:t.$t(t.i18nPrefix+"message_builder"),"label-for":"pmbMessageBuilder"}},[o("b-input",{attrs:{id:"pmbMessageBuilder",type:"text",name:"pmbMessageBuilder",autocomplete:"off",expanded:""},model:{value:t.result.message,callback:function(e){t.$set(t.result,"message","string"==typeof e?e.trim():e)},expression:"result.message"}})],1)],1)]),o("div",{staticClass:"columns"},[o("div",{staticClass:"column"},[o("b-field",{attrs:{label:t.$t(t.i18nPrefix+"message_preview"),"label-for":"pmbMessagePreview"}},[o("b-input",{attrs:{id:"pmbMessagePreview",type:t.nbMultiLine(t.resultMessage)?"textarea":"text",rows:t.nbMultiLine(t.resultMessage)?t.nbMultiLine(t.resultMessage):"",name:"pmbMessagePreview",autocomplete:"off",expanded:"",disabled:""},model:{value:t.resultMessage,callback:function(e){t.resultMessage="string"==typeof e?e.trim():e},expression:"resultMessage"}})],1)],1)]),o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half"},[o("b-field",{attrs:{label:t.$t(t.i18nPrefix+"template_name"),"label-for":"pmbTemplateName",type:{"is-danger":t.errors.templateName.found},message:t.errors.templateName.found?t.errors.templateName.message:""}},[o("b-input",{attrs:{id:"pmbTemplateName",type:"text",name:"pmbTemplateName",autocomplete:"off"},model:{value:t.templateName,callback:function(e){t.templateName="string"==typeof e?e.trim():e},expression:"templateName"}})],1)],1),o("div",{staticClass:"column is-half"},[o("b-field",{staticClass:"has-text-centered",attrs:{label:" "}},[o("b-button",{staticClass:"is-fullwidth",attrs:{type:"is-info"},on:{click:t.save}},[t._v(t._s(t.$t("utils.Save")))])],1)],1)])]:[o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half is-offset-3"},[o("b-button",{staticClass:"is-fullwidth",attrs:{type:"is-danger"},on:{click:t.deleteTemplate}},[t._v(t._s(t.$t("utils.Remove")))])],1)])]],2)}),[],!1,null,null,null).exports;o(87),o(88);function I(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function S(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?I(source,!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):I(source).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var A=/Default\s\d+/,T={name:"ImportPromotionMessage",props:{gbKey:{type:String,default:$.a.key},messageInterpolation:{type:Array,default:function(){return[{key:"FLVL",value:9},{key:"TLVL",value:10},{key:"OP",value:430}]}},placesInterpolationValues:{type:Array,default:function(){for(var t=[],e=[124,67,19,10,0],o=[402,402,421,421,430],i=0;i<$.a.levels[9].reward.length;i++)$.a.levels[9].reward[i]<=0||t.push([{key:"PI",value:i+1},{key:"PV",value:e[i],free:!0},{key:"PP",value:o[i]}]);return t}}},data:function(){var data={i18nPrefix:"components.import_promotion_message.",templateName:"",template:"",resultMessage:"",errors:{templateName:{found:!1,message:""},template:{found:!1,message:""}}};return data},computed:{lang:function(){return this.$store.state.locale}},watch:{lang:function(){null!==this.$data.result&&this.updatePromotionMessage()},templateName:function(t){t&&t.length?A.test(t)?(this.errors.templateName.found=!0,this.errors.templateName.message=this.$t("components.import_promotion_message.errors.template_cannot_have_this_name")):(this.errors.templateName.found=!1,this.errors.templateName.message=""):(this.errors.templateName.found=!0,this.errors.templateName.message=this.$t("utils.errors.field_cannot_be_empty"))},template:function(t){if(!t||!t.length)return"";var template;try{template=S({prefix:"",suffix:"",useShortGbName:!1,reversePlacesOrder:!1,placeSeparator:""},JSON.parse(t))}catch(t){return this.errors.template.found=!0,void(this.errors.template.message=this.$t("components.import_promotion_message.errors.invalid_data"))}var e=Object.keys(template);if(!e.includes("message")||!e.includes("place"))return this.errors.template.found=!0,void(this.errors.template.message=this.$t("components.import_promotion_message.errors.invalid_data"));this.errors.template.found=!1,this.errors.template.message="",this.resultMessage=v.a.call(this,this.$props.gbKey,template,this.$props.messageInterpolation,this.$props.placesInterpolationValues)}},methods:{successCopy:function(t){this.tooltips[t]=!0;var e=this;setTimeout((function(){e.tooltips[t]=!1}),3e3)},save:function(){var template,t=!1;this.template&&this.template.length||(this.errors.template.found=!0,this.errors.template.found=this.$t("utils.errors.field_cannot_be_empty"),t=!0);try{template=S({prefix:"",suffix:"",useShortGbName:!1,reversePlacesOrder:!1,placeSeparator:""},JSON.parse(this.template))}catch(e){this.errors.template.found=!0,this.errors.template.message=this.$t("components.import_promotion_message.errors.invalid_data"),t=!0}var e=Object.keys(template);if(e.includes("message")&&e.includes("place")||(this.errors.template.found=!0,this.errors.template.message=this.$t("components.import_promotion_message.errors.invalid_data"),t=!0),this.errors.template.found=!1,this.errors.template.found="",this.templateName&&this.templateName.length?A.test(this.templateName)?(this.errors.templateName.found=!0,this.errors.templateName.message=this.$t("components.import_promotion_message.errors.template_cannot_have_this_name"),t=!0):(this.errors.templateName.found=!1,this.errors.templateName.message=""):(this.errors.templateName.found=!0,this.errors.templateName.message=this.$t("utils.errors.field_cannot_be_empty"),t=!0),!t){var o=this.$cookies.get("customPromotionMessagesTemplates");o||(o=[]),o.push({name:this.templateName,config:template}),this.$cookies.set("customPromotionMessagesTemplates",o,{path:"/",expires:l.a.getDefaultCookieExpireTime()}),this.$store.commit("UPDATE_CUSTOM_PROMOTION_MESSAGE_TEMPLATES",JSON.parse(JSON.stringify(o))),this.$buefy.notification.open({message:this.$t("components.import_promotion_message.template_imported"),type:"is-success",duration:5e3})}},nbMultiLine:function(t){var e=t.match(/\n/gi);return e&&e.length>0?e.length+1:0},haveError:function(input){return this.$data.errors[input]?"is-danger":""}},components:{yesNo:d.a,numberinput:h.a}},L=Object(w.a)(T,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("h4",{staticClass:"title is-4 margin-top-one-em"},[t._v(t._s(t.$t(t.$data.i18nPrefix+"title")))]),o("div",{staticClass:"columns"},[o("div",{staticClass:"column"},[o("b-field",{attrs:{label:t.$t("components.promotion_message_builder.config"),"label-for":"ipmConfig",type:{"is-danger":t.errors.template.found},message:t.errors.template.found?t.errors.template.message:""}},[o("b-input",{attrs:{id:"ipmConfig",type:"text",name:"config",autocomplete:"off",placeholder:t.$t(t.i18nPrefix+"config_placeholder"),expanded:""},model:{value:t.template,callback:function(e){t.template="string"==typeof e?e.trim():e},expression:"template"}})],1)],1)]),o("div",{staticClass:"columns"},[o("div",{staticClass:"column"},[o("b-field",{attrs:{label:t.$t("components.promotion_message_builder.message_preview"),"label-for":"ipmMessagePreview"}},[o("b-input",{attrs:{id:"ipmMessagePreview",type:t.nbMultiLine(t.resultMessage)?"textarea":"text",rows:t.nbMultiLine(t.resultMessage)?t.nbMultiLine(t.resultMessage):"",name:"ipmMessagePreview",autocomplete:"off",expanded:"",disabled:""},model:{value:t.resultMessage,callback:function(e){t.resultMessage="string"==typeof e?e.trim():e},expression:"resultMessage"}})],1)],1)]),o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half"},[o("b-field",{attrs:{label:t.$t("components.promotion_message_builder.template_name"),"label-for":"ipmTemplateName",type:{"is-danger":t.errors.templateName.found},message:t.errors.templateName.found?t.errors.templateName.message:""}},[o("b-input",{attrs:{id:"ipmTemplateName",type:"text",name:"ipmTemplateName",autocomplete:"off"},model:{value:t.templateName,callback:function(e){t.templateName="string"==typeof e?e.trim():e},expression:"templateName"}})],1)],1),o("div",{staticClass:"column is-half"},[o("b-field",{staticClass:"has-text-centered",attrs:{label:" "}},[o("b-button",{staticClass:"is-fullwidth",attrs:{type:"is-info",expanded:""},on:{click:t.save}},[t._v(t._s(t.$t("utils.Save")))])],1)],1)])])}),[],!1,null,null,null).exports,E=o(5);function D(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function F(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?D(source,!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):D(source).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var O,M=/Default\s\d+/,U={level:"gbi_l",ownerInvestment:"gbi_oi",investorPercentageGlobal:"gbi_ipg",investorPercentageCustom:"gbi_p",investorParticipation:"gbi_ip",placeFree:"gbi_pFree",prefix:"gbi_px",suffix:"gbi_sx",displayGbName:"gbi_dgbn",shortName:"gbi_sn",showLevel:"gbi_sl",showPrefix:"gbi_spx",showSuffix:"gbi_ssx",showSnipe:"gbi_ss",showOnlySecuredPlaces:"gbi_sosp",yourArcBonus:"gbi_yab"},R={comparator:[">=",0],type:"float"},G={name:"GbInvestment",props:{gb:{type:Object,required:!0},canPermalink:{type:Boolean,default:!1}},data:function(){var t,e=this.cookieValid("".concat(this.$route.params.gb,"_investorPercentageGlobal"))?parseFloat(this.$cookies.get("".concat(this.$route.params.gb,"_investorPercentageGlobal"))):90;this.$cookies.get("promotionMessageList")?t=this.$cookies.get("promotionMessageList"):(this.$cookies.set("promotionMessageList",v.c,{path:"/",expires:l.a.getDefaultCookieExpireTime()}),t=v.c),this.$cookies.get("customPromotionMessagesTemplates")&&this.$cookies.get("customPromotionMessagesTemplates")instanceof Array&&this.$cookies.get("customPromotionMessagesTemplates").length&&this.$store.commit("UPDATE_CUSTOM_PROMOTION_MESSAGE_TEMPLATES",this.$cookies.get("customPromotionMessagesTemplates"));for(var data={i18nPrefix:"components.gb_investment.",level:this.cookieValid("".concat(this.$route.params.gb,"_level"))?parseInt(this.$cookies.get("".concat(this.$route.params.gb,"_level"))):10,maxLevel:this.$props.gb.levels.length,ownerInvestment:this.cookieValid("".concat(this.$route.params.gb,"_ownerInvestment"))?parseInt(this.$cookies.get("".concat(this.$route.params.gb,"_ownerInvestment"))):0,investorPercentageGlobal:e,investorPercentageCustom:Array.from(new Array(5),(function(){return e})),investorParticipation:[],addInvestors:null,showExtraInvestors:!1,showSnipe:"boolean"==typeof this.cookieValid("showSnipe")&&!!this.$cookies.get("showSnipe"),placeFree:Array.from(new Array(5),(function(){return{state:!0}})),prefix:this.$cookies.get("gbPrefix")?this.$cookies.get("gbPrefix"):"",suffix:this.$cookies.get("gbSuffix")?this.$cookies.get("gbSuffix"):"",displayGbName:"boolean"!=typeof this.$cookies.get("displayGbName")||!!this.$cookies.get("displayGbName"),shortName:"boolean"==typeof this.$cookies.get("shortName")&&!!this.$cookies.get("shortName"),showLevel:"boolean"!=typeof this.$cookies.get("showLevel")||!!this.$cookies.get("showLevel"),showPrefix:"boolean"!=typeof this.$cookies.get("gbShowPrefix")||!!this.$cookies.get("gbShowPrefix"),showSuffix:"boolean"!=typeof this.$cookies.get("gbShowSuffix")||!!this.$cookies.get("gbShowSuffix"),yourArcBonus:void 0===this.$cookies.get("yourArcBonus")?0:parseFloat(this.$cookies.get("yourArcBonus")),showOnlySecuredPlaces:"boolean"==typeof this.$cookies.get("showOnlySecuredPlaces")&&!!this.$cookies.get("showOnlySecuredPlaces"),displayTableCard:"boolean"==typeof this.$cookies.get("displayTableCard")&&!!this.$cookies.get("displayTableCard"),result:null,errors:{level:!1,ownerInvestment:!1,percentageValueGlobal:!1,investorPercentageCustom_0:!1,investorPercentageCustom_1:!1,investorPercentageCustom_2:!1,investorPercentageCustom_3:!1,investorPercentageCustom_4:!1,addInvestors:!1,yourArcBonus:!1},promotionMessageTab:0,promotion:[],promotionMessageList:t,childChange:!1,templateToAdd:""},i=0;i<5;i++)this.cookieValid("".concat(this.$route.params.gb,"_investorPercentageCustom_").concat(i))&&(data.investorPercentageCustom[i]=parseFloat(this.$cookies.get("".concat(this.$route.params.gb,"_investorPercentageCustom_").concat(i))));if(this.$cookies.get("".concat(this.$route.params.gb,"_investorParticipation"))&&this.$cookies.get("".concat(this.$route.params.gb,"_investorParticipation"))instanceof Array&&(data.investorParticipation=this.$cookies.get("".concat(this.$route.params.gb,"_investorParticipation")),"number"==typeof data.investorParticipation[0])){var o=[],r=!0,n=!1,c=void 0;try{for(var m,d=data.investorParticipation[Symbol.iterator]();!(r=(m=d.next()).done);r=!0){var h=m.value;o.push({value:h,isPotentialSniper:!0})}}catch(t){n=!0,c=t}finally{try{r||null==d.return||d.return()}finally{if(n)throw c}}data.investorParticipation=o}Object.assign(data,this.checkQuery(data.level,data.maxLevel)),O=JSON.parse(JSON.stringify(data.investorPercentageCustom)),this.$store.commit("ADD_URL_QUERY",{key:U.level,value:data.level,ns:"gbi"}),this.$store.commit("ADD_URL_QUERY",{key:U.ownerInvestment,value:data.ownerInvestment,ns:"gbi"}),this.$store.commit("ADD_URL_QUERY",{key:U.investorPercentageGlobal,value:data.investorPercentageGlobal,ns:"gbi"}),this.$store.commit("ADD_URL_QUERY",{key:U.investorParticipation,value:JSON.stringify(data.investorParticipation),ns:"gbi"});for(var f=0;f<data.investorPercentageCustom.length;f++)this.$store.commit("ADD_URL_QUERY",{key:U.investorPercentageCustom+(f+1),value:data.investorPercentageCustom[f],ns:"gbi"});for(var _=0;_<data.placeFree.length;_++)this.$store.commit("ADD_URL_QUERY",{key:U.placeFree+(_+1),value:data.placeFree[_].state?1:0,ns:"gbi"});return this.$store.commit("ADD_URL_QUERY",{key:U.prefix,value:data.prefix,ns:"gbi"}),this.$store.commit("ADD_URL_QUERY",{key:U.suffix,value:data.suffix,ns:"gbi"}),this.$store.commit("ADD_URL_QUERY",{key:U.shortName,value:data.shortName?1:0,ns:"gbi"}),this.$store.commit("ADD_URL_QUERY",{key:U.displayGbName,value:data.displayGbName?1:0,ns:"gbi"}),this.$store.commit("ADD_URL_QUERY",{key:U.showLevel,value:data.showLevel?1:0,ns:"gbi"}),this.$store.commit("ADD_URL_QUERY",{key:U.showPrefix,value:data.showPrefix,ns:"gbi"}),this.$store.commit("ADD_URL_QUERY",{key:U.showSuffix,value:data.showSuffix,ns:"gbi"}),this.$store.commit("UPDATE_URL_QUERY",{key:U.showSnipe,value:data.showSnipe?1:0,ns:"gbi"}),this.$store.commit("ADD_URL_QUERY",{key:U.yourArcBonus,value:data.yourArcBonus,ns:"gbi"}),this.$store.commit("ADD_URL_QUERY",{key:U.showOnlySecuredPlaces,value:data.showOnlySecuredPlaces,ns:"gbi"}),data},computed:{isPermalink:function(){return this.$store.state.isPermalink},lang:function(){return this.$store.state.locale},permaLink:function(){return{path:this.$i18nPath("gb-investment/"+this.gb.key+"/"),query:this.$store.getters.getUrlQuery("gbi")}},maxInvestment:function(){return this.$data.result&&this.$data.result.cost?this.$data.result.cost-this.investorParticipationNormalizedSum-this.ownerInvestmentNormalized:0},investorParticipationNormalizedSum:function(){return this.investorParticipationNormalized.reduce((function(i,t){return i+t.value}),0)},investorParticipationNormalized:function(){if(!(this.$data.investorParticipation instanceof Array))throw new E.g({expected:"Array",actual:Object(n.a)(this.$data.investorParticipation)});return this.$data.investorParticipation.map((function(t){return t.value=l.a.normalizeNumberValue(t.value,0),t.isPotentialSniper=!!t.isPotentialSniper,t}))},levelNormalized:function(){return l.a.normalizeNumberValue(this.$data.level,1)},ownerInvestmentNormalized:function(){return l.a.normalizeNumberValue(this.$data.ownerInvestment)},nbColumns:function(){return 6+(this.$data.showSnipe?1:0)+(this.investorParticipationNormalizedSum?2:0)},getCustomArcBonus:function(){return l.a.normalizeNumberValue(this.$data.yourArcBonus)},promotionMessageTemplates:function(){return this.$store.state.promotionMessageTemplates}},watch:{level:function(t,e){t&&"number"!=typeof t&&t.length>0?this.$data.errors.level=!0:l.a.handlerForm(this,"level",t&&0!==t.length?t:1,e,[1,this.$data.maxLevel],!this.isPermalink,this.$route.params.gb+"_level")===l.a.FormCheck.VALID&&(this.$store.commit("UPDATE_URL_QUERY",{key:U.level,value:t,ns:"gbi"}),this.$data.ownerInvestment=0,this.$data.showExtraInvestors=!1,this.$data.investorParticipation=[],this.$data.result={},this.showOnlySecuredPlaces||(this.$data.placeFree=Array.from(new Array(5),(function(){return{state:!0}}))),this.calculate())},ownerInvestment:function(t,e){t&&"number"!=typeof t&&t.length>0?this.$data.errors.ownerInvestment=!0:l.a.handlerForm(this,"ownerInvestment",t&&0!==t.length?t:0,e,[0,this.result.cost-this.investorParticipationNormalizedSum],!this.isPermalink,this.$route.params.gb+"_ownerInvestment")===l.a.FormCheck.VALID&&(this.$store.commit("UPDATE_URL_QUERY",{key:U.ownerInvestment,value:t,ns:"gbi"}),this.calculate())},addInvestors:function(t,e){null!==t&&(t&&"number"!=typeof t&&t.length>0?this.$data.errors.addInvestors=!0:l.a.handlerForm(this,"addInvestors",t&&0!==t.length?t:0,e,[1,this.maxInvestment])===l.a.FormCheck.VALID&&this.$store.commit("UPDATE_URL_QUERY",{key:U.addInvestors,value:t,ns:"gbi"}))},investorPercentageGlobal:function(t,e){if(t&&"number"!=typeof t&&t.length>0)this.$data.errors.investorPercentageGlobal=!0;else{var o=t&&0!==t.length?t:0;if(l.a.handlerForm(this,"investorPercentageGlobal",o,e,[">=",0],!this.isPermalink,this.$route.params.gb+"_investorPercentageGlobal","float")===l.a.FormCheck.VALID){this.$store.commit("UPDATE_URL_QUERY",{key:U.investorPercentageGlobal,value:t,ns:"gbi"});for(var r=[],n=0;n<this.$data.investorPercentageCustom.length;n++)this.$store.commit("UPDATE_URL_QUERY",{key:U.investorPercentageCustom+(n+1),value:l.a.normalizeNumberValue(t),ns:"gbi"}),r.push(o);this.$data.investorPercentageCustom=r,this.calculate()}}},investorPercentageCustom:function(t){for(var e,o=l.a.FormCheck.VALID,r=0;r<t.length;r++)(e=l.a.handlerForm(this,"investorPercentageCustom_"+r,0===t[r].length?0:t[r],O[r],[">=",0],!this.isPermalink,this.$route.params.gb+"_investorPercentageCustom_"+r,"float"))===l.a.FormCheck.INVALID?o=l.a.FormCheck.INVALID:e===l.a.FormCheck.VALID&&this.$store.commit("UPDATE_URL_QUERY",{key:U.investorPercentageCustom+(r+1),value:t[r],ns:"gbi"});o===l.a.FormCheck.VALID&&(O=JSON.parse(JSON.stringify(t)),this.calculate())},investorParticipation:function(t){this.$store.commit("UPDATE_URL_QUERY",{key:U.investorParticipation,value:JSON.stringify(t),ns:"gbi"}),this.$cookies.set("".concat(this.$route.params.gb,"_investorParticipation"),t,{path:"/",expires:l.a.getDefaultCookieExpireTime()}),this.calculate()},prefix:function(t){this.$store.commit("UPDATE_URL_QUERY",{key:U.prefix,value:t,ns:"gbi"}),this.$cookies.set("gbPrefix",t,{path:"/",expires:l.a.getDefaultCookieExpireTime()}),this.updatePromotionMessage()},suffix:function(t){this.$store.commit("UPDATE_URL_QUERY",{key:U.suffix,value:t,ns:"gbi"}),this.$cookies.set("gbSuffix",t,{path:"/",expires:l.a.getDefaultCookieExpireTime()}),this.updatePromotionMessage()},displayGbName:function(t){this.$store.commit("UPDATE_URL_QUERY",{key:U.displayGbName,value:t?1:0,ns:"gbi"}),this.$cookies.set("displayGbName",t,{path:"/",expires:l.a.getDefaultCookieExpireTime()}),this.updatePromotionMessage()},shortName:function(t){this.$store.commit("UPDATE_URL_QUERY",{key:U.shortName,value:t?1:0,ns:"gbi"}),this.$cookies.set("shortName",t,{path:"/",expires:l.a.getDefaultCookieExpireTime()}),this.updatePromotionMessage()},showLevel:function(t){this.$store.commit("UPDATE_URL_QUERY",{key:U.showLevel,value:t?1:0,ns:"gbi"}),this.$cookies.set("showLevel",t,{path:"/",expires:l.a.getDefaultCookieExpireTime()}),this.updatePromotionMessage()},showPrefix:function(t){this.$store.commit("UPDATE_URL_QUERY",{key:U.showPrefix,value:t?1:0,ns:"gbi"}),this.$cookies.set("gbShowPrefix",t,{path:"/",expires:l.a.getDefaultCookieExpireTime()}),this.updatePromotionMessage()},showSuffix:function(t){this.$store.commit("UPDATE_URL_QUERY",{key:U.showSuffix,value:t?1:0,ns:"gbi"}),this.$cookies.set("gbShowSuffix",t,{path:"/",expires:l.a.getDefaultCookieExpireTime()}),this.updatePromotionMessage()},showOnlySecuredPlaces:function(t){this.$store.commit("UPDATE_URL_QUERY",{key:U.showOnlySecuredPlaces,value:t?1:0,ns:"gbi"}),this.$cookies.set("showOnlySecuredPlaces",t,{path:"/",expires:l.a.getDefaultCookieExpireTime()}),this.updatePlaceFreeWhenOnlySecured()},showSnipe:function(t){this.$store.commit("UPDATE_URL_QUERY",{key:U.showSnipe,value:t?1:0,ns:"gbi"}),this.$cookies.set("showSnipe",t,{path:"/",expires:l.a.getDefaultCookieExpireTime()})},yourArcBonus:function(t,e){t&&"number"!=typeof t&&t.length>0||(this.$data.change=!0,l.a.handlerForm(this,"yourArcBonus",t&&0!==t.length?t:0,e,R.comparator,!this.isPermalink,"yourArcBonus","float")===l.a.FormCheck.VALID&&(this.$store.commit("UPDATE_URL_QUERY",{key:U.yourArcBonus,value:t,ns:"gbi"}),this.calculate()))},displayTableCard:function(t){this.$cookies.set("displayTableCard",!!t,{path:"/",expires:l.a.getDefaultCookieExpireTime()})},result:function(t){null!==t&&this.updatePromotionMessage()},lang:function(){null!==this.$data.result&&this.updatePromotionMessage()},promotionMessageList:{handler:function(t){this.$cookies.set("promotionMessageList",t,{path:"/",expires:l.a.getDefaultCookieExpireTime()}),this.updatePromotionMessage()},deep:!0}},methods:{goTo:function(t){this.$router.push("/gb-investment/".concat(t,"/"))},cookieValid:function(t){return void 0!==this.$cookies.get(t)&&!isNaN(this.$cookies.get(t))},calculate:function(){if(!(this.maxInvestment<0))try{this.$data.result=c.a.ComputeLevelInvestment(this.levelNormalized,l.a.normalizeNumberArray(this.$data.investorPercentageCustom),this.$props.gb.levels,this.investorParticipationNormalized,l.a.normalizeNumberValue(this.$data.ownerInvestment),l.a.normalizeNumberValue(this.$data.yourArcBonus)),this.updatePlaceFreeWhenOnlySecured()}catch(t){throw t}},updatePromotionMessage:function(){if(this.result&&this.result.investment){for(var t=[],e=[{key:"FLVL",value:this.level-1},{key:"TLVL",value:this.level},{key:"OP",value:this.$data.result.totalPreparations}],o=[],i=0;i<this.result.investment.length;i++)!this.result.investment[i].participation||this.result.investment[i].participation<=0||o.push([{key:"PI",value:i+1},{key:"PV",value:this.result.investment[i].participation,free:this.placeFree[i].state},{key:"PP",value:this.result.investment[i].preparation}]);var r=!0,n=!1,l=void 0;try{for(var c,m=this.$data.promotionMessageList[Symbol.iterator]();!(r=(c=m.next()).done);r=!0){var d=c.value;t.push({name:d.name,message:v.a.call(this,this.gb.key,F({},d.config,{prefix:this.showPrefix?this.prefix:"",suffix:this.showSuffix?this.suffix:"",displayGbName:this.displayGbName,useShortGbName:this.shortName,showLevel:this.showLevel}),e,o),active:!1})}}catch(t){n=!0,l=t}finally{try{r||null==m.return||m.return()}finally{if(n)throw l}}this.$data.promotion=t}},successCopy:function(t){this.promotion[t].active=!0;var e=this;setTimeout((function(){e.promotion[t].active=!1}),3e3)},changePlaceFree:function(i,t){this.$data.placeFree[i].state=t,this.$store.commit("UPDATE_URL_QUERY",{key:U.placeFree+(i+1),value:t?1:0,ns:"gbi"}),this.updatePromotionMessage()},changeIsPotentialSniper:function(i,t){this.$data.investorParticipation[i].isPotentialSniper=!!t,this.$store.commit("UPDATE_URL_QUERY",{key:U.investorParticipation,value:JSON.stringify(this.$data.investorParticipation),ns:"gbi"}),this.$cookies.set("".concat(this.$route.params.gb,"_investorParticipation"),this.$data.investorParticipation,{path:"/",expires:l.a.getDefaultCookieExpireTime()}),this.calculate()},checkQuery:function(t,e){var o={level:t},r=Array.apply(null,Array(5)).map((function(){return 90})),n=[],c=Array.apply(null,Array(5)).map((function(){return{state:!0}})),m=!1;this.$route.query[U.level]&&!isNaN(this.$route.query[U.level])&&l.a.inRange(parseInt(this.$route.query[U.level]),1,e)&&(m=!0,o.level=parseInt(this.$route.query[U.level])),this.$route.query[U.ownerInvestment]&&!isNaN(this.$route.query[U.ownerInvestment])&&l.a.inRange(parseInt(this.$route.query[U.ownerInvestment]),0,this.$props.gb.levels[o.level-1].cost)&&(m=!0,o.ownerInvestment=parseInt(this.$route.query[U.ownerInvestment])),this.$route.query[U.investorPercentageGlobal]&&!isNaN(this.$route.query[U.investorPercentageGlobal])&&parseFloat(this.$route.query[U.investorPercentageGlobal])>=0&&(m=!0,o.investorPercentageGlobal=parseInt(this.$route.query[U.investorPercentageGlobal]),r=Array.apply(null,Array(5)).map((function(){return o.investorPercentageGlobal})));for(var i=0;i<5;i++)if(this.$route.query[U.investorPercentageCustom+(i+1)]&&!isNaN(this.$route.query[U.investorPercentageCustom+(i+1)])&&parseFloat(this.$route.query[U.investorPercentageCustom+(i+1)])>=0&&(m=!0,r[i]=parseFloat(this.$route.query[U.investorPercentageCustom+(i+1)])),this.$route.query[U.investorParticipation]){var d=JSON.parse(this.$route.query[U.investorParticipation]);d instanceof Array&&(m=!0,n=d)}for(var h=0;h<5;h++)this.$route.query[U.placeFree+(h+1)]&&!isNaN(this.$route.query[U.placeFree+(h+1)])&&parseInt(this.$route.query[U.placeFree+(h+1)])>=0&&(m=!0,c[h].state=1===parseInt(this.$route.query[U.placeFree+(h+1)]));this.$route.query[U.prefix]&&(m=!0,o.prefix=this.$route.query[U.prefix]),this.$route.query[U.suffix]&&(m=!0,o.suffix=this.$route.query[U.suffix]),this.$route.query[U.displayGbName]&&(m=!0,o.displayGbName=!!parseInt(this.$route.query[U.displayGbName])),this.$route.query[U.shortName]&&(m=!0,o.shortName=!!parseInt(this.$route.query[U.shortName])),this.$route.query[U.showLevel]&&(m=!0,o.showLevel=!!parseInt(this.$route.query[U.showLevel])),this.$route.query[U.showPrefix]&&(m=!0,o.showPrefix=!!parseInt(this.$route.query[U.showPrefix])),this.$route.query[U.showSuffix]&&(m=!0,o.showSuffix=!!parseInt(this.$route.query[U.showSuffix])),this.$route.query[U.showSnipe]&&(m=!0,o.showSnipe=!!parseInt(this.$route.query[U.showSnipe])),this.$route.query[U.showOnlySecuredPlaces]&&(m=!0,o.showOnlySecuredPlaces=!!parseInt(this.$route.query[U.showOnlySecuredPlaces]));var f=l.a.checkFormNumeric(this.$route.query[U.yourArcBonus],-1,R.comparator,R.type);return f.state===l.a.FormCheck.VALID&&(m=!0,o.yourArcBonus=f.value),m&&(this.$store.commit("IS_PERMALINK",!0),o.investorPercentageCustom=r,o.investorParticipation=n,o.placeFree=c),o},addInvestor:function(){var t=this.$data.addInvestors;t&&"number"!=typeof t&&t.length>0?this.$data.errors.addInvestors=!0:l.a.handlerForm(this,"addInvestors",t&&0!==t.length?t:0,0,[1,this.maxInvestment])===l.a.FormCheck.VALID&&(this.$data.investorParticipation.push({value:t,isPotentialSniper:!0}),this.$data.investorParticipation=this.$data.investorParticipation.sort((function(a,b){return b.value-a.value})),this.$data.addInvestors=null,this.calculate())},removePromotionMessage:function(t){this.promotionMessageList.splice(t,1),this.$cookies.set("promotionMessageList",this.promotionMessageList,{path:"/",expires:l.a.getDefaultCookieExpireTime()}),this.promotion.splice(t,1)},getTemplateSample:function(template){if(this.result&&this.result.investment){for(var t=[{key:"FLVL",value:this.level-1},{key:"TLVL",value:this.level}],e=[],i=0;i<this.result.investment.length;i++)!this.result.investment[i].participation||this.result.investment[i].participation<=0||e.push([{key:"PI",value:i+1},{key:"PV",value:this.result.investment[i].participation,free:this.placeFree[i].state},{key:"PP",value:this.result.investment[i].preparation}]);return v.a.call(this,this.gb.key,F({},template,{prefix:this.prefix,suffix:this.suffix,displayGbName:this.displayGbName}),t,e)}},addPromotionMessageTemplate:function(){var t=this;if(this.templateToAdd&&this.templateToAdd.length){var e=M.test(this.templateToAdd)?this.promotionMessageTemplates.default.find((function(e){return e.name===t.templateToAdd})):this.promotionMessageTemplates.custom.find((function(e){return e.name===t.templateToAdd}));e&&(this.promotionMessageList.push(JSON.parse(JSON.stringify(e))),this.$cookies.set("promotionMessageList",this.promotionMessageList,{path:"/",expires:l.a.getDefaultCookieExpireTime()}),this.updatePromotionMessage(),this.templateToAdd="")}},removeInvestor:function(t){l.a.inRange(t,0,this.$data.investorParticipation.length-1)&&(this.$data.investorParticipation.splice(t,1),this.calculate())},haveReadTipAboutAddInvestor:function(){if(!this.$cookies.get("haveReadTipAboutAddInvestor")){var t=this;this.$buefy.snackbar.open({message:this.$t("components.gb_investment.gb_investment.form.tooltip_add_investors"),position:"is-top",actionText:this.$t("utils.Ok"),indefinite:!0,onAction:function(){t.$cookies.set("haveReadTipAboutAddInvestor",!0,{path:"/",expires:l.a.getDefaultCookieExpireTime()})}})}},switchPrefix:function(){this.showPrefix=!this.showPrefix,this.$cookies.set("gbShowPrefix",this.showPrefix,{path:"/",expires:l.a.getDefaultCookieExpireTime()})},switchSuffix:function(){this.showSuffix=!this.showSuffix,this.$cookies.set("gbShowSuffix",this.showSuffix,{path:"/",expires:l.a.getDefaultCookieExpireTime()})},updatePlaceFreeWhenOnlySecured:function(){if(this.showOnlySecuredPlaces){for(var i=0;i<this.result.investment.length;i++)this.placeFree[i].state=!this.result.investment[i].isInvestorParticipation&&this.result.investment[i].preparation-this.ownerInvestmentNormalized<=0;this.updatePromotionMessage()}},getSplittedCustomFields:function(t){var e=this.$data.promotionMessageList[this.$data.promotionMessageList.map((function(t){return t.name})).indexOf(t)].config.customFields,o=Object.keys(e).map((function(t){return e[t]}));return l.a.splitArray(o,2,!1)},nbMultiLine:function(t){var e=t.match(/\n/gi);return e&&e.length>0?e.length+1:0},haveError:function(input){return this.$data.errors[input]?"is-danger":""}},mounted:function(){this.calculate()},components:{securePosition:f.a,gbListSelect:m.a,yesNo:d.a,numberinput:h.a,PromotionMessageBuilder:N,ImportPromotionMessage:L}},V=Object(w.a)(G,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"content"},[o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half"},[o("div",{staticClass:"field"},[o("h3",{staticClass:"title is-3"},[t._v(t._s(t.$t("foe_data.gb."+t.gb.key)))])]),o("div",{staticClass:"field"},[o("gb-list-select",{attrs:{current:t.gb.key},on:{change:function(e){return t.goTo(e)}}})],1)]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.canPermalink,expression:"canPermalink"}],staticClass:"column is-half"},[o("div",{staticClass:"field"},[o("nuxt-link",{staticClass:"level-right",attrs:{id:"permalink",to:t.permaLink,exact:""}},[o("span",{staticClass:"icon"},[o("i",{staticClass:"fas fa-link"})]),t._v(" "+t._s(t.$t("utils.permalink")))])],1)])]),o("h4",{staticClass:"title is-4"},[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.title")))]),o("p",[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.description.p1")))]),o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half"},[o("b-field",{attrs:{label:t.$t(t.i18nPrefix+"gb_investment.form.level",{level:t.levelNormalized,fromLevel:t.levelNormalized-1,min:1,max:t.maxLevel}),"label-for":"giLevel",type:t.haveError("level")}},[o("numberinput",{attrs:{id:"giLevel","controls-position":"compact",type:t.$store.state.isDarkTheme?"is-light":"is-dark",min:"1",max:t.maxLevel,name:"level",autocomplete:"off",autofocus:t.canPermalink,expanded:""},model:{value:t.level,callback:function(e){t.level=t._n(e)},expression:"level"}})],1)],1),o("div",{staticClass:"column is-half"},[o("b-field",{attrs:{label:t.$t(t.i18nPrefix+"gb_investment.form.investor_percentage"),"label-for":"giInvestorPercentageGlobal",type:t.haveError("investorPercentageGlobal")}},[o("numberinput",{attrs:{id:"giInvestorPercentageGlobal","controls-position":"compact",type:t.$store.state.isDarkTheme?"is-light":"is-dark",min:"0",step:"0.1",name:"investorPercentageGlobal",autocomplete:"off",expanded:""},model:{value:t.investorPercentageGlobal,callback:function(e){t.investorPercentageGlobal=t._n(e)},expression:"investorPercentageGlobal"}})],1)],1)]),null!==t.result?o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half"},[o("b-field",{attrs:{label:t.$t(t.i18nPrefix+"gb_investment.form.owner_investment",{max:t.result.cost-t.investorParticipationNormalizedSum}),"label-for":"giOwnerInvestment",type:t.haveError("ownerInvestment")}},[o("numberinput",{attrs:{id:"giOwnerInvestment","controls-position":"compact",type:t.$store.state.isDarkTheme?"is-light":"is-dark",min:"0",max:t.result.cost-t.investorParticipationNormalizedSum,name:"ownerInvestment",autocomplete:"off",expanded:""},model:{value:t.ownerInvestment,callback:function(e){t.ownerInvestment=t._n(e)},expression:"ownerInvestment"}})],1)],1),o("div",{staticClass:"column is-half"},[o("b-field",{attrs:{label:t.$t("components.secure_position.block_place.your_arc_bonus"),"label-for":"giYourArcBonus",type:t.haveError("yourArcBonus")}},[o("numberinput",{attrs:{id:"giYourArcBonus","controls-position":"compact",type:t.$store.state.isDarkTheme?"is-light":"is-dark",min:"0",step:"0.1",name:"your-arc-bonus",autocomplete:"off",expanded:""},model:{value:t.yourArcBonus,callback:function(e){t.yourArcBonus=t._n(e)},expression:"yourArcBonus"}})],1)],1)]):t._e(),o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half"},[o("b-field",{attrs:{label:t.$t(t.i18nPrefix+"gb_investment.form.add_investors",{min:1,max:t.maxInvestment}),"label-for":"giAddInvestors"}},[o("b-field",{attrs:{type:t.haveError("addInvestors")}},[o("b-input",{attrs:{id:"giAddInvestors",type:"number",min:"1",max:t.maxInvestment,name:"addInvestors",autocomplete:"off",expanded:"",disabled:t.maxInvestment<=0},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addInvestor(e)},click:function(e){return t.haveReadTipAboutAddInvestor(e)}},model:{value:t.addInvestors,callback:function(e){t.addInvestors=t._n(e)},expression:"addInvestors"}}),o("p",{staticClass:"control"},[o("button",{staticClass:"button is-info",attrs:{title:t.$t("utils.Add"),disabled:t.maxInvestment<=0},on:{click:t.addInvestor}},[o("span",{staticClass:"icon"},[o("i",{staticClass:"fas fa-plus"})]),t._v("  "+t._s(t.$t("utils.Add")))])])],1)],1)],1),o("div",{staticClass:"column is-half"},[o("yes-no",{attrs:{label:t.$t(t.i18nPrefix+"gb_investment.form.show_snipe")},model:{value:t.showSnipe,callback:function(e){t.showSnipe=e},expression:"showSnipe"}})],1)]),null!==t.result?o("div",{staticClass:"columns"},[t.investorParticipation.length>0?o("div",{staticClass:"column"},[o("b-field",{attrs:{label:t.$t(t.i18nPrefix+"gb_investment.form.investors_list")}}),o("b-field",{attrs:{grouped:"","group-multiline":""}},t._l(t.investorParticipation,(function(e,r){return o("div",{staticClass:"control"},[o("b-tag",{attrs:{type:isNaN(e.value)?"is-danger":"is-primary",attached:"",closable:"",size:"is-medium"},on:{close:function(e){return t.removeInvestor(r)}}},[t._v(t._s(e.value))])],1)})),0)],1):t._e()]):t._e(),o("div",{staticClass:"columns is-hidden-desktop is-hidden-widescreen"},[o("div",{staticClass:"column is-half"},[o("yes-no",{attrs:{label:t.$t(t.i18nPrefix+"gb_investment.form.display_card")},model:{value:t.displayTableCard,callback:function(e){t.displayTableCard=e},expression:"displayTableCard"}})],1)]),null!==t.result?o("div",{staticClass:"table-wrapper"},[o("table",{staticClass:"table is-bordered is-striped is-narrow is-fullwidth",class:t.displayTableCard?"is-hidden-touch":""},[o("thead",[o("tr",[o("th",{staticClass:"has-text-centered",attrs:{colspan:t.nbColumns}},[o("p",[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.table.title",{gb_key:"foe_data.gb."+t.gb.key,level:t.result.level,fromLevel:t.result.level-1})))])])]),t.investorParticipationNormalizedSum||t.ownerInvestmentNormalized?o("tr",[o("th",{staticClass:"has-text-centered",attrs:{colspan:t.nbColumns}},[o("progress",{staticClass:"progress is-success",staticStyle:{"margin-bottom":"0"},attrs:{max:t.result.cost},domProps:{value:t.investorParticipationNormalizedSum+t.ownerInvestmentNormalized}}),o("p",[t._v(t._s(t.$formatNumber(t.investorParticipationNormalizedSum+t.ownerInvestmentNormalized)+"/"+t.$formatNumber(t.result.cost))+" ("+t._s(t.$formatNumber(t.result.cost-(t.investorParticipationNormalizedSum+t.ownerInvestmentNormalized)))+")")])])]):t._e(),o("tr",[o("th",[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.table.thead.th1")))]),o("th",[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.table.thead.th2")))]),o("th",[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.table.thead.th3")))]),o("th",[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.table.thead.th4")))]),t.investorParticipationNormalizedSum?o("th",[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.table.thead.fp_already_putin")))]):t._e(),o("th",{directives:[{name:"show",rawName:"v-show",value:t.showSnipe,expression:"showSnipe"}]},[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.table.thead.spot_snipe")))]),o("th",[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.table.thead.th5")))]),o("th",{directives:[{name:"show",rawName:"v-show",value:t.investorParticipationNormalizedSum,expression:"investorParticipationNormalizedSum"}]},[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.table.thead.is_sniper")))]),o("th",{attrs:{width:"100px"}},[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.table.thead.th6")))])])]),o("tbody",[t._l(t.result.investment,(function(e,i){return o("tr",[o("td",{staticClass:"has-text-right"},[t._v(t._s(t.$formatNumber(i+1)))]),o("td",{staticClass:"has-text-right"},[t._v(t._s(t.$formatNumber(e.reward)))]),o("td",{staticClass:"has-text-right"},[e.preparation>0&&t.ownerInvestmentNormalized>0?o("p",[t._v(t._s(t.$formatNumber(e.preparation))+" ("),e.preparation-t.ownerInvestmentNormalized>0?[o("b-tooltip",{attrs:{type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.$t(t.i18nPrefix+"gb_investment.table.tbody.tooltip_owner_investment"),dashed:""}},[o("span",{staticClass:"has-text-danger"},[t._v(t._s(t.$formatNumber(e.preparation-t.ownerInvestmentNormalized)))])])]:[o("span",{staticClass:"has-text-success"},[t._v(t._s(t.$t("utils.Secured")))])],t._v(")")],2):o("p",[t._v(t._s(t.$formatNumber(e.preparation))),0===e.preparation?[t._v(" ("),o("span",{staticClass:"has-text-success"},[t._v(t._s(t.$t("utils.Secured")))]),t._v(")")]:t._e()],2)]),o("td",{staticClass:"has-text-right"},[o("p",[t._v(t._s(t.$formatNumber(e.expectedParticipation)))])]),t.investorParticipationNormalizedSum?o("td",{staticClass:"has-text-right",attrs:{width:"150px"}},[e.isInvestorParticipation?[o("p",[t._v(t._s(t.$formatNumber(e.participation))+" ("),e.roi>0?[t._m(0,!0),o("b-tooltip",{attrs:{type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.$t(t.i18nPrefix+"gb_investment.table.tbody.profit",{count:Math.abs(e.roi)}),dashed:""}},[t._v(t._s(t.$formatNumber(Math.abs(e.roi))))])]:e.roi<0?[t._m(1,!0),o("b-tooltip",{attrs:{type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.$t(t.i18nPrefix+"gb_investment.table.tbody.loss",{count:Math.abs(e.roi)}),dashed:""}},[t._v(t._s(t.$formatNumber(Math.abs(e.roi))))])]:o("b-tooltip",{attrs:{type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.$t(t.i18nPrefix+"gb_investment.table.tbody.neutral"),dashed:""}},[o("span",{staticClass:"icon is-small",staticStyle:{"vertical-align":"middle"}},[o("i",{staticClass:"fas fa-exchange-alt"})])]),t._v(")")],2)]:[o("p",[t._v("0"),e.participation>0?[t._v(" ("),o("b-tooltip",{attrs:{type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.$t(t.i18nPrefix+"gb_investment.table.tbody.tooltip_expected_investment"),dashed:""}},[t._v(t._s(t.$formatNumber(e.participation)))]),t._v(")")]:t._e()],2)]],2):t._e(),o("td",{directives:[{name:"show",rawName:"v-show",value:t.showSnipe,expression:"showSnipe"}],staticClass:"has-text-right",attrs:{width:"110px"}},[-1===e.snipe.fp?[t._m(2,!0)]:e.snipe.fp>0?o("p",{staticClass:"snipe fp"},[t._v(t._s(t.$formatNumber(e.snipe.fp))+" ("),e.snipe.roi>0?[t._m(3,!0),o("b-tooltip",{attrs:{type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.$t(t.i18nPrefix+"gb_investment.table.tbody.profit",{count:Math.abs(e.roi)}),dashed:""}},[t._v(t._s(t.$formatNumber(Math.abs(e.snipe.roi))))])]:e.snipe.roi<0?[t._m(4,!0),o("b-tooltip",{attrs:{type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.$t(t.i18nPrefix+"gb_investment.table.tbody.loss",{count:Math.abs(e.roi)}),dashed:""}},[t._v(t._s(t.$formatNumber(Math.abs(e.snipe.roi))))])]:o("b-tooltip",{attrs:{type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.$t(t.i18nPrefix+"gb_investment.table.tbody.neutral"),dashed:""}},[o("span",{staticClass:"icon is-small",staticStyle:{"vertical-align":"middle"}},[o("i",{staticClass:"fas fa-exchange-alt"})])]),t._v(")")],2):t._e()],2),o("td",[o("b-field",{attrs:{type:t.haveError("investorPercentageCustom_"+i)}},[o("b-input",{attrs:{type:"number",min:"0",step:"0.1",name:"investorPercentageCustom_"+i,autocomplete:"off"},model:{value:t.investorPercentageCustom[i],callback:function(e){t.$set(t.investorPercentageCustom,i,t._n(e))},expression:"investorPercentageCustom[i]"}})],1)],1),o("td",{directives:[{name:"show",rawName:"v-show",value:t.investorParticipation.length>0,expression:"investorParticipation.length > 0"}]},[e.defaultParticipationIndex>=0?[o("b-switch",{attrs:{value:t.investorParticipation[e.defaultParticipationIndex].isPotentialSniper,type:"is-info"},on:{input:function(o){return t.changeIsPotentialSniper(e.defaultParticipationIndex,o)}}},[t._v(t._s(t.investorParticipation[e.defaultParticipationIndex].isPotentialSniper?t.$t("utils.Yes"):t.$t("utils.No")))])]:t._e()],2),o("td",[o("b-switch",{attrs:{value:t.placeFree[i].state,type:"is-info"},on:{input:function(e){return t.changePlaceFree(i,e)}}},[t._v(t._s(t.placeFree[i].state?t.$t("utils.Yes"):t.$t("utils.No")))])],1)])})),t.result.otherInvestment.length&&t.showExtraInvestors?t._l(t.result.otherInvestment,(function(e,i){return o("tr",[o("td",{staticClass:"has-text-right"},[t._v(t._s(t.$formatNumber(i+t.result.investment.length+1)))]),o("td",{attrs:{colspan:"3"}}),o("td",{staticClass:"has-text-right"},[e.isInvestorParticipation?[o("p",[t._v(t._s(t.$formatNumber(e.participation)))])]:[o("p",[t._v("0"),e.participation>0?[t._v(" ("),o("b-tooltip",{attrs:{type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.$t(t.i18nPrefix+"gb_investment.table.tbody.tooltip_expected_investment"),dashed:""}},[t._v(t._s(t.$formatNumber(e.participation)))]),t._v(")")]:t._e()],2)]],2),o("td",{attrs:{colspan:t.nbColumns-7}}),o("td",[o("b-switch",{attrs:{value:t.investorParticipation[e.defaultParticipationIndex].isPotentialSniper,type:"is-info"},on:{input:function(o){return t.changeIsPotentialSniper(e.defaultParticipationIndex,o)}}},[t._v(t._s(t.investorParticipation[e.defaultParticipationIndex].isPotentialSniper?t.$t("utils.Yes"):t.$t("utils.No")))])],1),o("td")])})):t._e()],2),o("tfoot",[t.result.otherInvestment.length?o("tr",[o("th",{staticClass:"has-text-centered",attrs:{colspan:t.nbColumns}},[o("p",{staticClass:"control has-text-centered"},[t.showExtraInvestors?o("button",{staticClass:"button is-info",on:{click:function(e){t.showExtraInvestors=!1}}},[t._m(6),t._v("   "+t._s(t.$t(t.i18nPrefix+"gb_investment.table.tbody.button_hide_extra_investor",{count:t.result.otherInvestment.length})))]):o("button",{staticClass:"button is-info",on:{click:function(e){t.showExtraInvestors=!0}}},[t._m(5),t._v("   "+t._s(t.$t(t.i18nPrefix+"gb_investment.table.tbody.button_show_extra_investor",{count:t.result.otherInvestment.length})))])])])]):t._e(),o("tr",[o("th",{attrs:{colspan:t.nbColumns-1}},[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.table.tfoot.total_preparation")))]),o("td",[o("p",{staticClass:"level-right"},[t._v(t._s(t.$formatNumber(t.result.totalPreparations))),t.ownerInvestmentNormalized>0&&t.result.totalPreparations-t.ownerInvestmentNormalized>0?[t._v(" ("),o("b-tooltip",{attrs:{type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.$t(t.i18nPrefix+"gb_investment.table.tfoot.tooltip_owner_investment"),position:"is-left",dashed:""}},[o("span",{staticClass:"has-text-danger"},[t._v(t._s(t.$formatNumber(t.result.totalPreparations-t.ownerInvestmentNormalized)))])]),t._v(")")]:t._e()],2)])]),o("tr",[o("th",{attrs:{colspan:t.nbColumns-1}},[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.table.tfoot.level_cost")))]),o("td",[o("p",{staticClass:"level-right"},[t._v(t._s(t.$formatNumber(t.result.cost)))])])])])])]):t._e(),null!==t.result&&t.displayTableCard?o("div",{staticClass:"is-hidden-desktop is-hidden-widescreen"},[o("div",{staticClass:"table-wrapper"},[o("table",{staticClass:"table has-table-cards"},[o("thead",[o("tr",[o("th",{staticClass:"has-text-centered",attrs:{colspan:2}},[o("p",[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.table.title",{gb_key:"foe_data.gb."+t.gb.key,level:t.result.level,fromLevel:t.result.level-1})))])])]),t.investorParticipationNormalizedSum||t.ownerInvestmentNormalized?o("tr",[o("th",{staticClass:"has-text-centered",attrs:{colspan:2}},[o("progress",{staticClass:"progress is-success",staticStyle:{"margin-bottom":"0"},attrs:{max:t.result.cost},domProps:{value:t.investorParticipationNormalizedSum+t.ownerInvestmentNormalized}}),o("p",[t._v(t._s(t.$formatNumber(t.investorParticipationNormalizedSum+t.ownerInvestmentNormalized)+"/"+t.$formatNumber(t.result.cost))+" ("+t._s(t.$formatNumber(t.result.cost-(t.investorParticipationNormalizedSum+t.ownerInvestmentNormalized)))+")")])])]):t._e()]),o("tbody",[t._l(t.result.investment.concat(t.showExtraInvestors?t.result.otherInvestment:[]),(function(e,r){return[o("tr",[o("th",[t._v(t._s(t.$t(t.i18nPrefix+"gb_investment.table.thead.th1")))]),o("td",{staticClass:"has-text-right"},[t._v(t._s(t.$formatNumber(r+1)))])]),r<t.result.investment.length?o("tr",[o("th",[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.table.thead.th2")))]),o("td",{staticClass:"has-text-right"},[t._v(t._s(t.$formatNumber(e.reward)))])]):t._e(),r<t.result.investment.length?o("tr",[o("th",[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.table.thead.th3")))]),o("td",{staticClass:"has-text-right"},[e.preparation>0&&t.ownerInvestmentNormalized>0?o("p",[t._v(t._s(t.$formatNumber(e.preparation))+" ("),e.preparation-t.ownerInvestmentNormalized>0?[o("b-tooltip",{attrs:{type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.$t(t.i18nPrefix+"gb_investment.table.tbody.tooltip_owner_investment"),position:"is-left",dashed:""}},[o("span",{staticClass:"has-text-danger"},[t._v(t._s(t.$formatNumber(e.preparation-t.ownerInvestmentNormalized)))])])]:[o("span",{staticClass:"has-text-success"},[t._v(t._s(t.$t("utils.Secured")))])],t._v(")")],2):o("p",[t._v(t._s(t.$formatNumber(e.preparation))),0===e.preparation?[t._v(" ("),o("span",{staticClass:"has-text-success"},[t._v(t._s(t.$t("utils.Secured")))]),t._v(")")]:t._e()],2)])]):t._e(),r<t.result.investment.length?o("tr",[o("th",[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.table.thead.th4")))]),o("td",{staticClass:"has-text-right"},[t._v(t._s(t.$formatNumber(e.expectedParticipation)))])]):t._e(),t.investorParticipationNormalizedSum?o("tr",[o("th",[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.table.thead.fp_already_putin")))]),e.isInvestorParticipation?o("td",[o("p",[t._v(t._s(t.$formatNumber(e.participation)))])]):o("td",[o("p",[t._v("0"),e.participation>0?[t._v(" ("),o("b-tooltip",{attrs:{position:"is-left",type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.$t(t.i18nPrefix+"gb_investment.table.tbody.tooltip_expected_investment"),dashed:""}},[t._v(t._s(t.$formatNumber(e.participation)))]),t._v(")")]:t._e()],2)])]):t._e(),t.showSnipe&&r<t.result.investment.length?o("tr",[o("th",[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.table.thead.spot_snipe")))]),o("td",[-1===e.snipe.fp?[t._m(7,!0)]:e.snipe.fp>0?o("p",{staticClass:"snipe fp"},[t._v(t._s(t.$formatNumber(e.snipe.fp))+" ("),e.snipe.roi>0?[t._m(8,!0),o("b-tooltip",{attrs:{position:"is-left",type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.$t(t.i18nPrefix+"gb_investment.table.tbody.profit",{count:Math.abs(e.roi)}),dashed:""}},[t._v(t._s(t.$formatNumber(Math.abs(e.snipe.roi))))])]:e.snipe.roi<0?[t._m(9,!0),o("b-tooltip",{attrs:{position:"is-left",type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.$t(t.i18nPrefix+"gb_investment.table.tbody.loss",{count:Math.abs(e.roi)}),dashed:""}},[t._v(t._s(t.$formatNumber(Math.abs(e.snipe.roi))))])]:o("b-tooltip",{attrs:{position:"is-left",type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.$t(t.i18nPrefix+"gb_investment.table.tbody.neutral"),dashed:""}},[o("span",{staticClass:"icon is-small",staticStyle:{"vertical-align":"middle"}},[o("i",{staticClass:"fas fa-exchange-alt"})])]),t._v(")")],2):t._e()],2)]):t._e(),r<t.result.investment.length?o("tr",[o("th",[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.table.thead.th5")))]),o("td",[o("b-field",{attrs:{type:t.haveError("investorPercentageCustom_"+r)}},[o("b-input",{attrs:{type:"number",min:"0",step:"0.1",name:"investorPercentageCustom_"+r,autocomplete:"off"},model:{value:t.investorPercentageCustom[r],callback:function(e){t.$set(t.investorPercentageCustom,r,t._n(e))},expression:"investorPercentageCustom[index]"}})],1)],1)]):t._e(),o("tr",{directives:[{name:"show",rawName:"v-show",value:t.investorParticipation.length>0,expression:"investorParticipation.length > 0"}],class:r>=t.result.investment.length?"last-in-card":""},[e.defaultParticipationIndex>=0?[o("th",[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.table.thead.is_sniper")))]),o("td",[o("b-switch",{attrs:{value:t.investorParticipation[e.defaultParticipationIndex].isPotentialSniper,type:"is-info"},on:{input:function(o){return t.changeIsPotentialSniper(e.defaultParticipationIndex,o)}}},[t._v(t._s(t.investorParticipation[e.defaultParticipationIndex].isPotentialSniper?t.$t("utils.Yes"):t.$t("utils.No")))])],1)]:t._e()],2),r<t.result.investment.length?o("tr",{staticClass:"last-in-card"},[o("th",[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.table.thead.th6")))]),o("td",[o("b-switch",{attrs:{value:t.placeFree[r].state,type:"is-info"},on:{input:function(e){return t.changePlaceFree(r,e)}}},[t._v(t._s(t.placeFree[r].state?t.$t("utils.Yes"):t.$t("utils.No")))])],1)]):t._e()]}))],2),o("tfoot",[o("tr",[o("th",{directives:[{name:"show",rawName:"v-show",value:t.result.otherInvestment.length,expression:"result.otherInvestment.length"}],staticClass:"has-text-centered",attrs:{colspan:t.nbColumns}},[o("p",{staticClass:"control has-text-centered"},[t.showExtraInvestors?o("button",{staticClass:"button is-info",on:{click:function(e){t.showExtraInvestors=!1}}},[t._m(11),t._v("   "+t._s(t.$t(t.i18nPrefix+"gb_investment.table.tbody.button_hide_extra_investor",{count:t.result.otherInvestment.length})))]):o("button",{staticClass:"button is-info",on:{click:function(e){t.showExtraInvestors=!0}}},[t._m(10),t._v("   "+t._s(t.$t(t.i18nPrefix+"gb_investment.table.tbody.button_show_extra_investor",{count:t.result.otherInvestment.length})))])])])]),o("tr",[o("th",[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.table.tfoot.total_preparation")))]),o("td",[o("p",{staticClass:"level-right"},[t._v(t._s(t.$formatNumber(t.result.totalPreparations))),t.ownerInvestmentNormalized>0&&t.result.totalPreparations-t.ownerInvestmentNormalized>0?[t._v(" ("),o("b-tooltip",{attrs:{type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.$t(t.i18nPrefix+"gb_investment.table.tfoot.tooltip_owner_investment"),position:"is-left",dashed:""}},[o("span",{staticClass:"has-text-danger"},[t._v(t._s(t.$formatNumber(t.result.totalPreparations-t.ownerInvestmentNormalized)))])]),t._v(")")]:t._e()],2)])]),o("tr",[o("th",[t._v(t._s(t.$t(t.$data.i18nPrefix+"gb_investment.table.tfoot.level_cost")))]),o("td",[o("p",{staticClass:"level-right"},[t._v(t._s(t.$formatNumber(t.result.cost)))])])])])])])]):t._e(),null!==t.result?o("h4",{staticClass:"title is-4 margin-top-one-em"},[t._v(t._s(t.$t(t.$data.i18nPrefix+"promotion.title")))]):t._e(),o("b-tabs",{attrs:{expanded:""},model:{value:t.promotionMessageTab,callback:function(e){t.promotionMessageTab=e},expression:"promotionMessageTab"}},[o("b-tab-item",{attrs:{label:t.$t(t.$data.i18nPrefix+"promotion.title")}},[o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half"},[o("b-field",{attrs:{label:t.$t("utils.Prefix"),"label-for":"giPrefix"}}),o("b-field",[o("b-input",{attrs:{id:"giPrefix",type:"text",name:"prefix",autocomplete:"off",placeholder:t.$t(t.$data.i18nPrefix+"promotion.prefix_placeholder"),expanded:""},model:{value:t.prefix,callback:function(e){t.prefix="string"==typeof e?e.trim():e},expression:"prefix"}}),o("p",{staticClass:"control"},[o("b-tooltip",{attrs:{type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.showPrefix?t.$t("utils.Hide"):t.$t("utils.Show")}},[o("button",{staticClass:"button copy",attrs:{title:t.showPrefix?t.$t("utils.Hide"):t.$t("utils.Show")},on:{click:function(e){return t.switchPrefix()}}},[o("span",{directives:[{name:"show",rawName:"v-show",value:t.showPrefix,expression:"showPrefix"}],staticClass:"icon"},[t._v("  "),o("i",{staticClass:"fas fa-eye"})]),o("span",{directives:[{name:"show",rawName:"v-show",value:!t.showPrefix,expression:"!showPrefix"}],staticClass:"icon"},[o("i",{staticClass:"fas fa-eye-slash"}),t._v("   ")])])])],1)],1)],1),o("div",{staticClass:"column is-half"},[o("b-field",{attrs:{label:t.$t("utils.Suffix"),"label-for":"giSuffix"}}),o("b-field",[o("b-input",{attrs:{id:"giSuffix",type:"text",name:"suffix",autocomplete:"off",placeholder:t.$t(t.$data.i18nPrefix+"promotion.suffix_placeholder"),expanded:""},model:{value:t.suffix,callback:function(e){t.suffix="string"==typeof e?e.trim():e},expression:"suffix"}}),o("p",{staticClass:"control"},[o("b-tooltip",{attrs:{type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.showSuffix?t.$t("utils.Hide"):t.$t("utils.Show")}},[o("button",{staticClass:"button copy",attrs:{title:t.showSuffix?t.$t("utils.Hide"):t.$t("utils.Show")},on:{click:t.switchSuffix}},[o("span",{directives:[{name:"show",rawName:"v-show",value:t.showSuffix,expression:"showSuffix"}],staticClass:"icon"},[t._v("  "),o("i",{staticClass:"fas fa-eye"})]),o("span",{directives:[{name:"show",rawName:"v-show",value:!t.showSuffix,expression:"!showSuffix"}],staticClass:"icon"},[o("i",{staticClass:"fas fa-eye-slash"}),t._v("   ")])])])],1)],1)],1)]),o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half"},[o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half"},[o("yes-no",{attrs:{label:t.$t(t.$data.i18nPrefix+"gb_investment.display_gb_name")},model:{value:t.displayGbName,callback:function(e){t.displayGbName=e},expression:"displayGbName"}})],1),t.displayGbName?o("div",{staticClass:"column is-half"},[o("yes-no",{attrs:{label:t.$t(t.$data.i18nPrefix+"gb_investment.use_short_name")},model:{value:t.shortName,callback:function(e){t.shortName=e},expression:"shortName"}})],1):t._e()])]),o("div",{staticClass:"column is-half"},[o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half"},[o("yes-no",{attrs:{label:t.$t(t.$data.i18nPrefix+"gb_investment.show_level")},model:{value:t.showLevel,callback:function(e){t.showLevel=e},expression:"showLevel"}})],1),o("div",{staticClass:"column is-half"},[o("yes-no",{attrs:{label:t.$t(t.i18nPrefix+"gb_investment.form.show_only_secured_places")},model:{value:t.showOnlySecuredPlaces,callback:function(e){t.showOnlySecuredPlaces=e},expression:"showOnlySecuredPlaces"}})],1)])])]),null!==t.result?o("div",[t._l(t.promotion,(function(e,i){return[t.promotionMessageList[t.promotionMessageList.map((function(t){return t.name})).indexOf(e.name)].config.customFields?t._l(t.getSplittedCustomFields(e.name),(function(line,e){return o("div",{staticClass:"columns"},t._l(line,(function(e,r){return o("div",{staticClass:"column is-half"},[o("b-field",{attrs:{label:e.key,"label-for":"custom_field_"+e.key}},[o("b-input",{attrs:{id:"custom_field_"+e.key,type:"text",name:"custom_field_"+e.key,autocomplete:"off",expanded:""},model:{value:t.promotionMessageList[i].config.customFields[e.key].value,callback:function(o){t.$set(t.promotionMessageList[i].config.customFields[e.key],"value","string"==typeof o?o.trim():o)},expression:"promotionMessageList[i].config.customFields[elt.key].value"}})],1)],1)})),0)})):t._e(),o("div",{staticClass:"columns"},[o("div",{staticClass:"column"},[o("b-field",[o("p",{staticClass:"control"},[o("b-tooltip",{attrs:{type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.$t("utils.Remove")}},[o("button",{staticClass:"button is-danger is-outlined",attrs:{title:t.$t("utils.Remove")},on:{click:function(e){return t.removePromotionMessage(i)}}},[o("span",{staticClass:"icon"},[o("i",{staticClass:"fas fa-trash"})])])])],1),o("b-input",{attrs:{type:t.nbMultiLine(e.message)?"textarea":"text",rows:t.nbMultiLine(e.message)?t.nbMultiLine(e.message):"",value:e.message,readonly:"",expanded:""}}),o("p",{staticClass:"control"},[o("b-tooltip",{attrs:{type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.$t("utils.Copyed"),active:e.active,always:""}},[o("button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.message,expression:"value.message"}],staticClass:"button copy",attrs:{title:t.$t("utils.Copy")},on:{success:function(e){return t.successCopy(i)}}},[o("span",{staticClass:"icon"},[o("i",{staticClass:"far fa-copy"})]),t._v("  "+t._s(t.$t("utils.Copy")))])])],1)],1)],1)])]}))],2):t._e(),o("div",{staticClass:"columns"},[o("div",{staticClass:"column"},[o("b-field",[o("b-select",{attrs:{id:"pmbTemplateToAdd",name:"templateToAdd",autocomplete:"off",expanded:""},model:{value:t.templateToAdd,callback:function(e){t.templateToAdd="string"==typeof e?e.trim():e},expression:"templateToAdd"}},[o("optgroup",{attrs:{label:t.$t("components.promotion_message_builder.templates.default")}},t._l(t.promotionMessageTemplates.default,(function(template){return o("option",{key:template.name,domProps:{value:template.name}},[t._v(t._s(template.name)+": "+t._s(t.getTemplateSample(template.config)))])})),0),t.promotionMessageTemplates.custom.length?o("optgroup",{attrs:{label:t.$t("components.promotion_message_builder.templates.custom")}},t._l(t.promotionMessageTemplates.custom,(function(template){return o("option",{key:template.name,domProps:{value:template.name}},[t._v(t._s(template.name)+": "+t._s(t.getTemplateSample(template.config)))])})),0):t._e()]),o("p",{staticClass:"control"},[o("button",{staticClass:"button is-info",attrs:{title:t.$t("utils.Add"),disabled:t.maxInvestment<=0},on:{click:t.addPromotionMessageTemplate}},[o("span",{staticClass:"icon"},[o("i",{staticClass:"fas fa-plus"})]),t._v("  "+t._s(t.$t("utils.Add")))])])],1)],1)])]),o("b-tab-item",{attrs:{label:t.$t("components.import_promotion_message.title")}},[o("ImportPromotionMessage")],1),o("b-tab-item",{attrs:{label:t.$t("components.promotion_message_builder.title")}},[o("PromotionMessageBuilder")],1)],1),t.result?o("div",{staticStyle:{"margin-top":"2rem"}},[o("secure-position",{attrs:{levelData:t.result,ns:"gbi",customYourArcBonus:t.getCustomArcBonus,canCustomYourArcBonus:!0},on:{customYourArcBonus:function(e){t.yourArcBonus=e}}})],1):t._e()],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-small has-text-success",staticStyle:{"vertical-align":"middle"}},[e("i",{staticClass:"fas fa-arrow-up"}),this._v(" ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-small has-text-danger",staticStyle:{"vertical-align":"middle"}},[e("i",{staticClass:"fas fa-arrow-down"}),this._v(" ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-small",staticStyle:{"vertical-align":"middle"}},[e("i",{staticClass:"fas fa-lock"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-small has-text-success",staticStyle:{"vertical-align":"middle"}},[e("i",{staticClass:"fas fa-arrow-up"}),this._v(" ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-small has-text-danger",staticStyle:{"vertical-align":"middle"}},[e("i",{staticClass:"fas fa-arrow-down"}),this._v(" ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-eye"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-eye-slash"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-small",staticStyle:{"vertical-align":"middle"}},[e("i",{staticClass:"fas fa-lock"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-small has-text-success",staticStyle:{"vertical-align":"middle"}},[e("i",{staticClass:"fas fa-arrow-up"}),this._v(" ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-small has-text-danger",staticStyle:{"vertical-align":"middle"}},[e("i",{staticClass:"fas fa-arrow-down"}),this._v(" ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-eye"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-eye-slash"})])}],!1,null,null,null);e.a=V.exports},530:function(t,e,o){"use strict";o(83),o(381);var r,n=o(2),l=o(3),c=o(393),m=o(420),d=o(62),h={from:"gbi_f",to:"gbi_t",yourArcBonus:"gbi_yab",takingPlaceInConsideration:"gbi_tpic",showPlace:"gbi_sp",customPercentage:"gbi_cp",investorPercentageGlobal:"gbi_ipg",investorPercentageCustom:"gbi_pc"},f=0,v={from:{comparator:[">=",1],type:"int"},to:{comparator:[">=",1],type:"int"},yourArcBonus:{comparator:[">=",0],type:"float"},takingPlaceInConsideration:{comparator:[0,2],type:"int"},investorPercentageGlobal:{comparator:[">=",0],type:"float"},investorPercentageCustom:{comparator:[">=",0],type:"float"}},_={name:"GbInvestmentInvestors",props:{gb:{type:Object,required:!0},canPermalink:{type:Boolean,default:!1}},data:function(){var t=this.$props.gb.levels.length,data={i18nPrefix:"components.gb_investment_investors.",yourArcBonus:void 0===this.$cookies.get("yourArcBonus")?0:this.$cookies.get("yourArcBonus"),investorPercentageGlobal:80,investorPercentageCustom:Array.from(new Array(5),(function(){return 80})),customPercentage:!1,result:null,maxLevel:t,from:this.cookieValid("".concat(this.$route.params.gb,"_from"))?this.$cookies.get("".concat(this.$route.params.gb,"_from")):1,to:this.cookieValid("".concat(this.$route.params.gb,"_to"))?this.$cookies.get("".concat(this.$route.params.gb,"_to")):10,maxConsideration:3,takingPlaceInConsideration:this.cookieValid("".concat(this.$route.params.gb,"_takingPlaceInConsideration"))?parseInt(this.$cookies.get("".concat(this.$route.params.gb,"_takingPlaceInConsideration"))):0,showPlace:Array.from(new Array(5),(function(t,e){return 0===e})),errors:{from:!1,to:!1,yourArcBonus:!1,percentageValueGlobal:!1,takingPlaceInConsideration:!1}};return this.$cookies.get("".concat(this.$route.params.gb,"_showPlace"))instanceof Array&&(data.showPlace=l.a.normalizeBooleanArray(this.$cookies.get("".concat(this.$route.params.gb,"_showPlace")))),Object.assign(data,this.checkQuery(data.maxLevel,data.from,data.to,data.customPercentage)),this.$store.commit("ADD_URL_QUERY",{key:h.from,value:data.from,ns:"gbii"}),this.$store.commit("ADD_URL_QUERY",{key:h.to,value:data.to,ns:"gbii"}),this.$store.commit("ADD_URL_QUERY",{key:h.yourArcBonus,value:data.yourArcBonus,ns:"gbii"}),this.$store.commit("ADD_URL_QUERY",{key:h.investorPercentageGlobal,value:data.investorPercentageGlobal,ns:"gbii"}),this.$store.commit("ADD_URL_QUERY",{key:h.cp,value:data.customPercentage?1:0,ns:"gbii"}),this.$store.commit("ADD_URL_QUERY",{key:h.takingPlaceInConsideration,value:data.takingPlaceInConsideration,ns:"gbii"}),this.$store.commit("ADD_URL_QUERY",{key:h.showPlace,value:JSON.stringify(data.showPlace),ns:"gbii"}),r=JSON.parse(JSON.stringify(data.investorPercentageCustom)),data},computed:{fromInput:{get:function(){return this.normalizedFrom()-1},set:function(t){this.checkFrom(t+1),f=t+1}},isPermalink:function(){return this.$store.state.isPermalink},permaLink:function(){return{path:this.$i18nPath("gb-investment/"+this.gb.key+"/"),query:this.$store.getters.getUrlQuery("gbii")}}},watch:{from:function(t,e){t&&"number"!=typeof t&&t.length>0?this.$data.errors.from=!0:l.a.handlerForm(this,"from",t&&0!==t.length?t:1,e,[1,this.normalizedTo()],!this.isPermalink,"".concat(this.$route.params.gb,"_from"))===l.a.FormCheck.VALID&&(this.$store.commit("UPDATE_URL_QUERY",{key:h.from,value:t,ns:"gbii"}),this.updateGlobalProfitLoss())},to:function(t,e){t&&"number"!=typeof t&&t.length>0?this.$data.errors.to=!0:l.a.handlerForm(this,"to",t&&0!==t.length?t:0,e,[this.normalizedFrom(),this.$data.maxLevel],!this.isPermalink,"".concat(this.$route.params.gb,"_to"))===l.a.FormCheck.VALID&&(this.$data.errors.from&&this.checkFrom(f)&&(this.$data.errors.from=!1),this.$store.commit("UPDATE_URL_QUERY",{key:h.to,value:t,ns:"gbii"}),this.updateGlobalProfitLoss())},takingPlaceInConsideration:function(t,e){l.a.handlerForm(this,"takingPlaceInConsideration",0===t.length?0:t,e,v.takingPlaceInConsideration.comparator,!this.isPermalink,this.$route.params.gb+"_takingPlaceInConsideration")===l.a.FormCheck.VALID&&(this.$store.commit("UPDATE_URL_QUERY",{key:h.takingPlaceInConsideration,value:t,ns:"gbii"}),this.compute())},yourArcBonus:function(t,e){t&&"number"!=typeof t&&t.length>0||l.a.handlerForm(this,"yourArcBonus",t&&0!==t.length?t:0,e,v.yourArcBonus.comparator,!this.isPermalink,"yourArcBonus",v.yourArcBonus.type)===l.a.FormCheck.VALID&&(this.$store.commit("UPDATE_URL_QUERY",{key:h.yourArcBonus,value:t,ns:"gbii"}),this.compute())},investorPercentageGlobal:function(t,e){if(!(t&&"number"!=typeof t&&t.length>0)&&l.a.handlerForm(this,"investorPercentageGlobal",t&&0!==t.length?t:0,e,[">=",0],!1,this.$route.params.gb+"_investorPercentageGlobal","float")===l.a.FormCheck.VALID){this.$store.commit("UPDATE_URL_QUERY",{key:h.investorPercentageGlobal,value:t,ns:"gbii"});for(var o=0;o<this.$data.investorPercentageCustom.length;o++)this.$store.commit("UPDATE_URL_QUERY",{key:h.investorPercentageCustom+(o+1),value:t,ns:"gbii"}),this.$data.investorPercentageCustom[o]=t;this.compute()}},investorPercentageCustom:function(t){for(var e=l.a.FormCheck.VALID,o=0;o<t.length;o++){if("number"!=typeof t[o])return;l.a.handlerForm(this,"investorPercentageCustom_"+o,0===t[o].length?0:t[o],r[o],[">=",0],!1,this.$route.params.gb+"_investorPercentageCustom_"+o,"float")===l.a.FormCheck.INVALID&&(e=l.a.FormCheck.INVALID)}if(e===l.a.FormCheck.VALID){r=JSON.parse(JSON.stringify(t));for(var n=0;n<t.length;n++)this.$store.commit("UPDATE_URL_QUERY",{key:h.investorPercentageCustom+(n+1),value:t[n],ns:"gbii"});this.compute()}},customPercentage:function(t){this.$store.commit("UPDATE_URL_QUERY",{key:h.customPercentage,value:t?1:0,ns:"gbii"});for(var i=0;i<5;i++)this.$data.investorPercentageCustom[i]=l.a.normalizeNumberValue(this.$data.investorPercentageGlobal),this.$store.commit("UPDATE_URL_QUERY",{key:h.investorPercentageCustom+(i+1),value:this.$data.investorPercentageCustom[i],ns:"gbii"})},showPlace:function(t){this.$store.commit("UPDATE_URL_QUERY",{key:h.showPlace,value:JSON.stringify(t),ns:"gbii"}),this.$cookies.set("".concat(this.$route.params.gb,"_showPlace"),l.a.normalizeBooleanArray(t),{path:"/",expires:l.a.getDefaultCookieExpireTime()})}},methods:{normalizedFrom:function(){return l.a.normalizeNumberValue(this.$data.from,1)},normalizedTo:function(){return l.a.normalizeNumberValue(this.$data.to,1)},goTo:function(t){this.$router.push("/gb-investment/".concat(t,"/"))},haveError:function(t){return this.$data.errors[t]?"is-danger":""},cookieValid:function(t){return void 0!==this.$cookies.get(t)&&!isNaN(this.$cookies.get(t))},checkFrom:function(t){return 0===t.length?(n.a.set(this.$data.errors,"from",!0),!1):l.a.handlerForm(this,"from",t,this.normalizedFrom(),[1,this.normalizedTo()])===l.a.FormCheck.VALID&&(n.a.set(this.$data.errors,"from",!1),n.a.set(this.$data,"from",t),!0)},checkQuery:function(t,e,o,r){var n,c=["from","to","investorPercentageCustom"],m={},d=l.a.FormCheck.NO_CHANGE,f=Array.apply(null,Array(5)).map((function(){return 80})),_=e,$=o,P=0,y=r;for(var x in v)c.indexOf(x)>=0||(n=l.a.checkFormNumeric(this.$route.query[h[x]],-1,v[x].comparator,v[x].type)).state===l.a.FormCheck.VALID&&(d=l.a.FormCheck.VALID,m[x]=n.value);if(this.$route.query[h.from]&&!isNaN(this.$route.query[h.from])&&parseInt(this.$route.query[h.from])>=1&&(P++,_=parseInt(this.$route.query[h.from])),this.$route.query[h.to]&&!isNaN(this.$route.query[h.to])&&parseInt(this.$route.query[h.to])>=1&&(P++,$=parseInt(this.$route.query[h.to])),P>0&&_<=$&&(d=l.a.FormCheck.VALID,m.from=_,m.to=$),this.$route.query[h.customPercentage]&&!isNaN(this.$route.query[h.customPercentage])&&parseInt(this.$route.query[h.customPercentage])>=0&&(d=l.a.FormCheck.VALID,m.customPercentage=1===parseInt(this.$route.query[h.customPercentage]),y=m.customPercentage),y)for(var i=0;i<5;i++)(n=l.a.checkFormNumeric(this.$route.query[h.investorPercentageCustom+(i+1)],-1,v.investorPercentageCustom.comparator,v.investorPercentageCustom.type)).state===l.a.FormCheck.VALID&&(d=l.a.FormCheck.VALID,f[i]=n.value);if(d===l.a.FormCheck.VALID&&(this.$store.commit("IS_PERMALINK",!0),m.investorPercentageCustom=f),this.$route.query[h.showPlace]){var C=JSON.parse(this.$route.query[h.showPlace]);C instanceof Array&&(m.showPlace=l.a.normalizeBooleanArray(C))}return d===l.a.FormCheck.VALID&&(this.$store.commit("IS_PERMALINK",!0),m.change=!0),m},updateGlobalProfitLoss:function(){var t=this;this.$data.result.globalProfitLoss=[];for(var e=this.$data.result.slice(this.$data.from-1,this.$data.to),o=function(i){t.$data.result.globalProfitLoss.push(e.map((function(t){return t.investment[i].roi})).reduce((function(i,t){return i+t}),0))},i=0;i<5;i++)o(i)},compute:function(){for(var t=this,e=[],i=0;i<this.$props.gb.levels.length;i++){for(var o=2===this.$data.takingPlaceInConsideration?l.a.normalizeNumberArray(this.$data.investorPercentageCustom):Array.apply(null,Array(5)).map((function(){return t.$data.yourArcBonus})),r=Object.assign(JSON.parse(JSON.stringify(this.$props.gb.levels[i])),c.a.ComputeLevelInvestment(i+1,o,this.$props.gb.levels)),m=0,d=0;d<r.investment.length;d++){if(d>0)switch(this.$data.takingPlaceInConsideration){case 0:break;case 1:m+=r.investment[d-1].fp;break;case 2:m+=r.investment[d-1].preparation+r.investment[d-1].participation}2===this.$data.takingPlaceInConsideration?(r.investment[d].realParticipation=Math.round(r.investment[d].reward*(1+this.$data.yourArcBonus/100)),r.investment[d].roi=Math.round(r.investment[d].reward*(1+this.$data.yourArcBonus/100))-r.investment[d].expectedParticipation):r.investment[d]=Object.assign(r.investment[d],c.a.ComputeSecurePlace(r.cost,m,0,0,l.a.normalizeNumberValue(this.$data.yourArcBonus),r.reward[d]))}e.push(r)}n.a.set(this.$data,"result",e),this.updateGlobalProfitLoss()}},mounted:function(){this.compute()},components:{gbListSelect:m.a,YesNo:d.a}},$=o(13),component=Object($.a)(_,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"content"},[o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half"},[o("div",{staticClass:"field"},[o("h3",{staticClass:"title is-3"},[t._v(t._s(t.$t("foe_data.gb."+t.gb.key)))])]),o("div",{staticClass:"field"},[o("gb-list-select",{attrs:{current:t.gb.key},on:{change:function(e){return t.goTo(e)}}})],1)]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.canPermalink,expression:"canPermalink"}],staticClass:"column is-half"},[o("div",{staticClass:"field"},[o("nuxt-link",{staticClass:"level-right",attrs:{id:"permalink",to:t.permaLink,exact:""}},[o("span",{staticClass:"icon"},[o("i",{staticClass:"fas fa-link"})]),t._v(" "+t._s(t.$t("utils.permalink")))])],1)])]),o("h4",{staticClass:"title is-4"},[t._v(t._s(t.$t("routes.gb_investment_gb_chooser.hero.title")))]),o("p",[t._v(t._s(t.$t(t.$data.i18nPrefix+"description.p1",{count:t.maxConsideration})))]),o("p",[o("b",[t._v(t._s(t.$t(t.$data.i18nPrefix+"takingPlaceInConsideration.form.no")))]),t._v(" "+t._s(t.$t(t.$data.i18nPrefix+"takingPlaceInConsideration.description.no")))]),o("p",[o("b",[t._v(t._s(t.$t(t.$data.i18nPrefix+"takingPlaceInConsideration.form.normal")))]),t._v(" "+t._s(t.$t(t.$data.i18nPrefix+"takingPlaceInConsideration.description.normal")))]),o("p",[o("b",[t._v(t._s(t.$t(t.$data.i18nPrefix+"takingPlaceInConsideration.form.optimal")))]),t._v(" "+t._s(t.$t(t.$data.i18nPrefix+"takingPlaceInConsideration.description.optimal")))]),o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half"},[o("b-field",{attrs:{label:t.$t("utils.From"),"label-for":"previsionFrom",type:t.haveError("from")}},[o("b-input",{attrs:{id:"previsionFrom",type:"number",min:"0",max:t.to-1,name:"previsionFrom",autocomplete:"off"},model:{value:t.fromInput,callback:function(e){t.fromInput=t._n(e)},expression:"fromInput"}})],1)],1),o("div",{staticClass:"column is-half"},[o("b-field",{attrs:{label:t.$t("utils.To",{max:t.maxLevel}),"label-for":"previsionTo",type:t.haveError("to")}},[o("b-input",{attrs:{id:"previsionTo",type:"number",min:t.from,max:t.maxLevel,name:"previsionTo",autocomplete:"off"},model:{value:t.to,callback:function(e){t.to=t._n(e)},expression:"to"}})],1)],1)]),o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half"},[o("b-field",{attrs:{label:t.$t("components.secure_position.block_place.your_arc_bonus"),"label-for":"giiYourArcBonus",type:t.haveError("yourArcBonus")}},[o("b-input",{attrs:{id:"giiYourArcBonus",type:"number",min:"0",step:"0.1",name:"your-arc-bonus",autocomplete:"off"},model:{value:t.yourArcBonus,callback:function(e){t.yourArcBonus=t._n(e)},expression:"yourArcBonus"}})],1)],1)]),o("div",{directives:[{name:"show",rawName:"v-show",value:2===t.takingPlaceInConsideration,expression:"takingPlaceInConsideration === 2"}],staticClass:"columns"},[o("div",{staticClass:"column is-half"},[o("yes-no",{attrs:{label:t.$t("components.gb_forecast_cost.custom_percentage")},model:{value:t.customPercentage,callback:function(e){t.customPercentage=e},expression:"customPercentage"}})],1),o("div",{directives:[{name:"show",rawName:"v-show",value:!t.customPercentage,expression:"!customPercentage"}],staticClass:"column is-half"},[o("b-field",{attrs:{label:t.$t("components.gb_investment.gb_investment.form.investor_percentage"),"label-for":"previsionInvestorPercentageGlobal",type:t.haveError("investorPercentageGlobal")}},[o("b-input",{attrs:{id:"previsionInvestorPercentageGlobal",type:"number",min:"0",step:"0.1",name:"investorPercentageGlobal",autocomplete:"off"},model:{value:t.investorPercentageGlobal,callback:function(e){t.investorPercentageGlobal=t._n(e)},expression:"investorPercentageGlobal"}})],1)],1)]),o("div",{directives:[{name:"show",rawName:"v-show",value:2===t.takingPlaceInConsideration&&t.customPercentage,expression:"takingPlaceInConsideration === 2 && customPercentage"}],staticClass:"table-wrapper"},[o("table",{staticClass:"table is-bordered is-striped is-narrow is-fullwidth"},[o("thead",[o("tr",[o("th",[t._v(t._s(t.$t("components.gb_investment.gb_investment.table.thead.th1")))]),o("th",[t._v(t._s(t.$t("components.gb_investment.gb_investment.table.thead.th5")))])])]),o("tbody",t._l(5,(function(i){return o("tr",[o("td",{staticClass:"has-text-right"},[t._v(t._s(i))]),o("td",[o("b-field",{attrs:{type:t.haveError("investorPercentageCustom_"+i)}},[o("b-input",{attrs:{type:"number",min:"0",step:"0.1",name:"investorPercentageCustom_"+i,autocomplete:"off"},model:{value:t.investorPercentageCustom[i-1],callback:function(e){t.$set(t.investorPercentageCustom,i-1,t._n(e))},expression:"investorPercentageCustom[i - 1]"}})],1)],1)])})),0)])]),o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half"},[o("b-field",{attrs:{label:t.$t(t.i18nPrefix+"takingPlaceInConsideration.label"),type:t.haveError("takingPlaceInConsideration")}}),o("b-field",[o("div",{staticClass:"control"},[o("span",{ref:"button-no",staticClass:"button button-no",class:{"is-danger is-selected":0===t.takingPlaceInConsideration,"is-dark-light is-outlined":0!==t.takingPlaceInConsideration&&this.$store.state.isDarkTheme},on:{click:function(e){t.takingPlaceInConsideration=0}}},[o("span",[t._v(t._s(t.$t(t.i18nPrefix+"takingPlaceInConsideration.form.no")))])])]),o("div",{staticClass:"control"},[o("span",{ref:"button-normal",staticClass:"button button-normal",class:{"is-info is-selected":1===t.takingPlaceInConsideration,"is-dark-light is-outlined":1!==t.takingPlaceInConsideration&&this.$store.state.isDarkTheme},on:{click:function(e){t.takingPlaceInConsideration=1}}},[o("span",[t._v(t._s(t.$t(t.i18nPrefix+"takingPlaceInConsideration.form.normal")))])])]),o("div",{staticClass:"control"},[o("span",{ref:"button-optimal",staticClass:"button button-optimal",class:{"is-success is-selected":2===t.takingPlaceInConsideration,"is-dark-light is-outlined":2!==t.takingPlaceInConsideration&&this.$store.state.isDarkTheme},on:{click:function(e){t.takingPlaceInConsideration=2}}},[o("span",[t._v(t._s(t.$t(t.i18nPrefix+"takingPlaceInConsideration.form.optimal")))])])])])],1),o("div",{staticClass:"column is-half"},[o("b-field",{attrs:{label:t.$t(t.i18nPrefix+"takingPlaceInConsideration.form.show_place")}}),o("div",{staticClass:"block"},[t._l(t.showPlace,(function(e,r){return[o("b-switch",{attrs:{type:"is-info"},model:{value:t.showPlace[r],callback:function(e){t.$set(t.showPlace,r,e)},expression:"showPlace[index]"}},[t._v(t._s(r+1))])]}))],2)],1)]),o("div",{staticClass:"table-wrapper",staticStyle:{"overflow-y":"auto"}},[null!==t.result?o("table",{staticClass:"table is-bordered is-striped is-narrow is-fullwidth"},[o("thead",[o("tr",[o("th",{attrs:{rowspan:"2"}},[o("p",[t._v(t._s(t.$t("utils.graph.gb_level")))])]),o("th",{attrs:{rowspan:"2"}},[o("p",[t._v(t._s(t.$t("components.gb_investment.gb_investment.table.tfoot.level_cost")))])]),t._l(t.showPlace,(function(e,r){return[o("th",{directives:[{name:"show",rawName:"v-show",value:t.showPlace[r],expression:"showPlace[index]"}],attrs:{colspan:"3"}},[o("p",[t._v(t._s(t.$t(t.i18nPrefix+"table.thead.th_place",{count:r+1})))])])]}))],2),o("tr",[t._l(t.showPlace,(function(e,r){return[o("th",{directives:[{name:"show",rawName:"v-show",value:t.showPlace[r],expression:"showPlace[index]"}]},[o("p",[t._v(t._s(t.$t("utils.Rewards")))])]),o("th",{directives:[{name:"show",rawName:"v-show",value:t.showPlace[r],expression:"showPlace[index]"}]},[o("p",[t._v(t._s(t.$t("utils.Cost")))])]),o("th",{directives:[{name:"show",rawName:"v-show",value:t.showPlace[r],expression:"showPlace[index]"}]},[o("p",[t._v(t._s(t.$t(t.i18nPrefix+"table.thead.th_profit_loss")))])])]}))],2)]),o("tbody",t._l(t.result.slice(t.from-1,t.to),(function(line,e){return o("tr",[o("td",{staticClass:"has-text-right"},[o("p",[t._v(t._s(t.$formatNumber(e+t.from-1))+" → "+t._s(t.$formatNumber(e+t.from)))])]),o("td",{staticClass:"has-text-right"},[o("p",[t._v(t._s(t.$formatNumber(line.cost)))])]),t._l(t.showPlace,(function(e,r){return[o("td",{directives:[{name:"show",rawName:"v-show",value:t.showPlace[r],expression:"showPlace[index]"}],staticClass:"has-text-right"},[2===t.takingPlaceInConsideration?o("p",[t._v(t._s(t.$formatNumber(line.investment[r].reward)+" (")),o("b-tooltip",{attrs:{type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.$t("components.gb_investment.gb_investment.table.thead.expected_participation"),dashed:""}},[t._v(t._s(t.$formatNumber(line.investment[r].participation)))]),t._v(" | "),o("b-tooltip",{attrs:{type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.$t("components.gb_investment.gb_investment.table.thead.real_participation"),dashed:""}},[t._v(t._s(t.$formatNumber(line.investment[r].realParticipation)))]),t._v(")")],1):o("p",[t._v(t._s(t.$formatNumber(line.investment[r].reward)+" ("+t.$formatNumber(line.investment[r].participation)+")"))])]),o("td",{directives:[{name:"show",rawName:"v-show",value:t.showPlace[r],expression:"showPlace[index]"}],staticClass:"has-text-right"},[2===t.takingPlaceInConsideration?o("p",[t._v(t._s(t.$formatNumber(line.investment[r].participation)+" (")),o("b-tooltip",{attrs:{type:t.$store.state.isDarkTheme?"is-light":"is-dark",label:t.$t("components.gb_investment.gb_investment.table.thead.th3"),dashed:""}},[t._v(t._s(t.$formatNumber(line.investment[r].preparation)))]),t._v(")")],1):o("p",[t._v(t._s(t.$formatNumber(line.investment[r].fp)))])]),o("td",{directives:[{name:"show",rawName:"v-show",value:t.showPlace[r],expression:"showPlace[index]"}],staticClass:"has-text-right"},[line.investment[r].roi>0?o("p",[t._m(0,!0),t._v(t._s(t.$formatNumber(Math.abs(line.investment[r].roi))))]):line.investment[r].roi<0?o("p",[t._m(1,!0),t._v(t._s(t.$formatNumber(Math.abs(line.investment[r].roi))))]):o("p",[t._m(2,!0)])])]}))],2)})),0),o("tfoot",[o("tr",[o("th",{attrs:{colspan:"2"}},[o("p",[t._v(t._s(t.$t(t.i18nPrefix+"table.thead.th_profit_loss")))])]),t._l(t.showPlace,(function(e,r){return[o("td",{directives:[{name:"show",rawName:"v-show",value:t.showPlace[r],expression:"showPlace[index]"}],staticClass:"has-text-right",attrs:{colspan:"3"}},[t.result.globalProfitLoss[r]>0?o("p",[t._m(3,!0),t._v(t._s(t.$formatNumber(Math.abs(t.result.globalProfitLoss[r]))))]):t.result.globalProfitLoss[r]<0?o("p",[t._m(4,!0),t._v(t._s(t.$formatNumber(Math.abs(t.result.globalProfitLoss[r]))))]):o("p",[t._m(5,!0)])])]}))],2)])]):t._e()])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-medium has-text-success",staticStyle:{"vertical-align":"middle"}},[e("i",{staticClass:"fas fa-arrow-up"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-medium has-text-danger",staticStyle:{"vertical-align":"middle"}},[e("i",{staticClass:"fas fa-arrow-down"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-medium",staticStyle:{"vertical-align":"middle"}},[e("i",{staticClass:"fas fa-exchange-alt"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-medium has-text-success",staticStyle:{"vertical-align":"middle"}},[e("i",{staticClass:"fas fa-arrow-up"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-medium has-text-danger",staticStyle:{"vertical-align":"middle"}},[e("i",{staticClass:"fas fa-arrow-down"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-medium",staticStyle:{"vertical-align":"middle"}},[e("i",{staticClass:"fas fa-exchange-alt"})])}],!1,null,null,null);e.a=component.exports}}]);